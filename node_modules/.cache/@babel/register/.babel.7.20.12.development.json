{"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _config = _interopRequireDefault(require(\"./config/config\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _compression = _interopRequireDefault(require(\"compression\"));\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\nvar _helmet = _interopRequireDefault(require(\"helmet\"));\nvar _middleware = _interopRequireDefault(require(\"./helpers/middleware\"));\nvar _initModels = _interopRequireWildcard(require(\"./models/init-models\"));\nvar _IndexRoute = _interopRequireDefault(require(\"./routes/IndexRoute\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n// 1. pastikan selalu import dotenv di line pertama\n//import \"dotenv/config\";\n\n//for access models to db\n\n// declare port\nconst port = process.env.PORT || 3001;\nconst app = (0, _express.default)();\n// parse body params and attache them to req.body\napp.use(_express.default.json());\napp.use(_express.default.urlencoded({\n  extended: true\n}));\napp.use((0, _cookieParser.default)());\n// use helmet spy bisa dikenali SEO\napp.use((0, _helmet.default)());\n// secure apps by setting various HTTP headers\napp.use((0, _compression.default)());\n// enable CORS - Cross Origin Resource Sharing\napp.use((0, _cors.default)());\n\n// load models dan simpan di req.context\napp.use(async (req, res, next) => {\n  req.context = {\n    models: _initModels.default\n  };\n  next();\n});\n\n//auth.setMiddleware(app);\n\n// call routes\napp.use(_config.default.URL_DOMAIN + \"/auth\", _IndexRoute.default.UserRoute);\n\n//use middleware to handle error from others modules\napp.use(_middleware.default.handleError);\napp.use(_middleware.default.notFound);\n\n// set to false agar tidak di drop tables yang ada didatabase\nconst dropDatabaseSync = false;\n_initModels.sequelize.sync({\n  force: dropDatabaseSync\n}).then(async () => {\n  if (dropDatabaseSync) {\n    console.log(\"Database do not drop\");\n  }\n  app.listen(port, () => {\n    console.log(`Server is listening on port ${port}`);\n  });\n});\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJhcHAiLCJleHByZXNzIiwidXNlIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImNvb2tpZVBhcnNlciIsImhlbG1ldCIsImNvbXByZXNzIiwiY29ycyIsInJlcSIsInJlcyIsIm5leHQiLCJjb250ZXh0IiwibW9kZWxzIiwiY29uZmlnIiwiVVJMX0RPTUFJTiIsInJvdXRlcyIsIlVzZXJSb3V0ZSIsIm1pZGRsZXdhcmUiLCJoYW5kbGVFcnJvciIsIm5vdEZvdW5kIiwiZHJvcERhdGFiYXNlU3luYyIsInNlcXVlbGl6ZSIsInN5bmMiLCJmb3JjZSIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gMS4gcGFzdGlrYW4gc2VsYWx1IGltcG9ydCBkb3RlbnYgZGkgbGluZSBwZXJ0YW1hXG4vL2ltcG9ydCBcImRvdGVudi9jb25maWdcIjtcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcvY29uZmlnJ1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgY29tcHJlc3MgZnJvbSAnY29tcHJlc3Npb24nO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBoZWxtZXQgZnJvbSAnaGVsbWV0JztcbmltcG9ydCBtaWRkbGV3YXJlICBmcm9tIFwiLi9oZWxwZXJzL21pZGRsZXdhcmVcIjtcblxuLy9mb3IgYWNjZXNzIG1vZGVscyB0byBkYlxuaW1wb3J0IG1vZGVscyx7c2VxdWVsaXplfSBmcm9tIFwiLi9tb2RlbHMvaW5pdC1tb2RlbHNcIjtcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvSW5kZXhSb3V0ZSdcblxuLy8gZGVjbGFyZSBwb3J0XG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG4vLyBwYXJzZSBib2R5IHBhcmFtcyBhbmQgYXR0YWNoZSB0aGVtIHRvIHJlcS5ib2R5XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKVxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSlcbmFwcC51c2UoY29va2llUGFyc2VyKCkpXG4vLyB1c2UgaGVsbWV0IHNweSBiaXNhIGRpa2VuYWxpIFNFT1xuYXBwLnVzZShoZWxtZXQoKSlcbi8vIHNlY3VyZSBhcHBzIGJ5IHNldHRpbmcgdmFyaW91cyBIVFRQIGhlYWRlcnNcbmFwcC51c2UoY29tcHJlc3MoKSlcbi8vIGVuYWJsZSBDT1JTIC0gQ3Jvc3MgT3JpZ2luIFJlc291cmNlIFNoYXJpbmdcbmFwcC51c2UoY29ycygpKTtcblxuLy8gbG9hZCBtb2RlbHMgZGFuIHNpbXBhbiBkaSByZXEuY29udGV4dFxuYXBwLnVzZShhc3luYyAocmVxLHJlcyxuZXh0KSA9PntcbiAgICByZXEuY29udGV4dCA9IHttb2RlbHN9O1xuICAgIG5leHQoKTtcbn0pO1xuXG5cblxuXG4vL2F1dGguc2V0TWlkZGxld2FyZShhcHApO1xuXG5cbi8vIGNhbGwgcm91dGVzXG5hcHAudXNlKGNvbmZpZy5VUkxfRE9NQUlOK1wiL2F1dGhcIixyb3V0ZXMuVXNlclJvdXRlKVxuXG5cbi8vdXNlIG1pZGRsZXdhcmUgdG8gaGFuZGxlIGVycm9yIGZyb20gb3RoZXJzIG1vZHVsZXNcbmFwcC51c2UobWlkZGxld2FyZS5oYW5kbGVFcnJvcik7XG5hcHAudXNlKG1pZGRsZXdhcmUubm90Rm91bmQpO1xuXG5cbi8vIHNldCB0byBmYWxzZSBhZ2FyIHRpZGFrIGRpIGRyb3AgdGFibGVzIHlhbmcgYWRhIGRpZGF0YWJhc2VcbmNvbnN0IGRyb3BEYXRhYmFzZVN5bmMgPSBmYWxzZTtcblxuc2VxdWVsaXplLnN5bmMoe2ZvcmNlIDogZHJvcERhdGFiYXNlU3luY30pLnRoZW4oYXN5bmMgKCk9PntcbiAgICBpZihkcm9wRGF0YWJhc2VTeW5jKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSBkbyBub3QgZHJvcFwiKTtcbiAgICB9XG5cbiAgICBhcHAubGlzdGVuKHBvcnQsKCk9PntcbiAgICAgICAgY29uc29sZS5sb2coYFNlcnZlciBpcyBsaXN0ZW5pbmcgb24gcG9ydCAke3BvcnR9YClcbiAgICB9KTtcblxufSlcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGFwcDsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUF3QztBQUFBO0FBQUE7QUFaeEM7QUFDQTs7QUFTQTs7QUFJQTtBQUNBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksSUFBSSxJQUFJO0FBRXJDLE1BQU1DLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxHQUFFO0FBQ3JCO0FBQ0FELEdBQUcsQ0FBQ0UsR0FBRyxDQUFDRCxnQkFBTyxDQUFDRSxJQUFJLEVBQUUsQ0FBQztBQUN2QkgsR0FBRyxDQUFDRSxHQUFHLENBQUNELGdCQUFPLENBQUNHLFVBQVUsQ0FBQztFQUFFQyxRQUFRLEVBQUU7QUFBSyxDQUFDLENBQUMsQ0FBQztBQUMvQ0wsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUkscUJBQVksR0FBRSxDQUFDO0FBQ3ZCO0FBQ0FOLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLElBQUFLLGVBQU0sR0FBRSxDQUFDO0FBQ2pCO0FBQ0FQLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLElBQUFNLG9CQUFRLEdBQUUsQ0FBQztBQUNuQjtBQUNBUixHQUFHLENBQUNFLEdBQUcsQ0FBQyxJQUFBTyxhQUFJLEdBQUUsQ0FBQzs7QUFFZjtBQUNBVCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxPQUFPUSxHQUFHLEVBQUNDLEdBQUcsRUFBQ0MsSUFBSSxLQUFJO0VBQzNCRixHQUFHLENBQUNHLE9BQU8sR0FBRztJQUFDQyxNQUFNLEVBQU5BO0VBQU0sQ0FBQztFQUN0QkYsSUFBSSxFQUFFO0FBQ1YsQ0FBQyxDQUFDOztBQUtGOztBQUdBO0FBQ0FaLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDYSxlQUFNLENBQUNDLFVBQVUsR0FBQyxPQUFPLEVBQUNDLG1CQUFNLENBQUNDLFNBQVMsQ0FBQzs7QUFHbkQ7QUFDQWxCLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDaUIsbUJBQVUsQ0FBQ0MsV0FBVyxDQUFDO0FBQy9CcEIsR0FBRyxDQUFDRSxHQUFHLENBQUNpQixtQkFBVSxDQUFDRSxRQUFRLENBQUM7O0FBRzVCO0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcsS0FBSztBQUU5QkMscUJBQVMsQ0FBQ0MsSUFBSSxDQUFDO0VBQUNDLEtBQUssRUFBR0g7QUFBZ0IsQ0FBQyxDQUFDLENBQUNJLElBQUksQ0FBQyxZQUFVO0VBQ3RELElBQUdKLGdCQUFnQixFQUFDO0lBQ2hCSyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztFQUN2QztFQUVBNUIsR0FBRyxDQUFDNkIsTUFBTSxDQUFDakMsSUFBSSxFQUFDLE1BQUk7SUFDaEIrQixPQUFPLENBQUNDLEdBQUcsQ0FBRSwrQkFBOEJoQyxJQUFLLEVBQUMsQ0FBQztFQUN0RCxDQUFDLENBQUM7QUFFTixDQUFDLENBQUM7QUFBQSxlQUlhSSxHQUFHO0FBQUEifQ==","map":{"version":3,"names":["port","process","env","PORT","app","express","use","json","urlencoded","extended","cookieParser","helmet","compress","cors","req","res","next","context","models","config","URL_DOMAIN","routes","UserRoute","middleware","handleError","notFound","dropDatabaseSync","sequelize","sync","force","then","console","log","listen"],"sourceRoot":"/Applications/nodejs/server/server/","sources":["index.js"],"sourcesContent":["// 1. pastikan selalu import dotenv di line pertama\n//import \"dotenv/config\";\nimport config from './config/config'\nimport express from \"express\";\nimport cors from \"cors\";\nimport compress from 'compression';\nimport cookieParser from 'cookie-parser';\nimport helmet from 'helmet';\nimport middleware  from \"./helpers/middleware\";\n\n//for access models to db\nimport models,{sequelize} from \"./models/init-models\";\nimport routes from './routes/IndexRoute'\n\n// declare port\nconst port = process.env.PORT || 3001;\n\nconst app = express();\n// parse body params and attache them to req.body\napp.use(express.json())\napp.use(express.urlencoded({ extended: true }))\napp.use(cookieParser())\n// use helmet spy bisa dikenali SEO\napp.use(helmet())\n// secure apps by setting various HTTP headers\napp.use(compress())\n// enable CORS - Cross Origin Resource Sharing\napp.use(cors());\n\n// load models dan simpan di req.context\napp.use(async (req,res,next) =>{\n    req.context = {models};\n    next();\n});\n\n\n\n\n//auth.setMiddleware(app);\n\n\n// call routes\napp.use(config.URL_DOMAIN+\"/auth\",routes.UserRoute)\n\n\n//use middleware to handle error from others modules\napp.use(middleware.handleError);\napp.use(middleware.notFound);\n\n\n// set to false agar tidak di drop tables yang ada didatabase\nconst dropDatabaseSync = false;\n\nsequelize.sync({force : dropDatabaseSync}).then(async ()=>{\n    if(dropDatabaseSync){\n        console.log(\"Database do not drop\");\n    }\n\n    app.listen(port,()=>{\n        console.log(`Server is listening on port ${port}`)\n    });\n\n})\n\n\n\nexport default app;"],"mappings":";;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAwC;AAAA;AAAA;AAZxC;AACA;;AASA;;AAIA;AACA,MAAMA,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;AAErC,MAAMC,GAAG,GAAG,IAAAC,gBAAO,GAAE;AACrB;AACAD,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACE,IAAI,EAAE,CAAC;AACvBH,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACG,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAC/CL,GAAG,CAACE,GAAG,CAAC,IAAAI,qBAAY,GAAE,CAAC;AACvB;AACAN,GAAG,CAACE,GAAG,CAAC,IAAAK,eAAM,GAAE,CAAC;AACjB;AACAP,GAAG,CAACE,GAAG,CAAC,IAAAM,oBAAQ,GAAE,CAAC;AACnB;AACAR,GAAG,CAACE,GAAG,CAAC,IAAAO,aAAI,GAAE,CAAC;;AAEf;AACAT,GAAG,CAACE,GAAG,CAAC,OAAOQ,GAAG,EAACC,GAAG,EAACC,IAAI,KAAI;EAC3BF,GAAG,CAACG,OAAO,GAAG;IAACC,MAAM,EAANA;EAAM,CAAC;EACtBF,IAAI,EAAE;AACV,CAAC,CAAC;;AAKF;;AAGA;AACAZ,GAAG,CAACE,GAAG,CAACa,eAAM,CAACC,UAAU,GAAC,OAAO,EAACC,mBAAM,CAACC,SAAS,CAAC;;AAGnD;AACAlB,GAAG,CAACE,GAAG,CAACiB,mBAAU,CAACC,WAAW,CAAC;AAC/BpB,GAAG,CAACE,GAAG,CAACiB,mBAAU,CAACE,QAAQ,CAAC;;AAG5B;AACA,MAAMC,gBAAgB,GAAG,KAAK;AAE9BC,qBAAS,CAACC,IAAI,CAAC;EAACC,KAAK,EAAGH;AAAgB,CAAC,CAAC,CAACI,IAAI,CAAC,YAAU;EACtD,IAAGJ,gBAAgB,EAAC;IAChBK,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACvC;EAEA5B,GAAG,CAAC6B,MAAM,CAACjC,IAAI,EAAC,MAAI;IAChB+B,OAAO,CAACC,GAAG,CAAE,+BAA8BhC,IAAK,EAAC,CAAC;EACtD,CAAC,CAAC;AAEN,CAAC,CAAC;AAAA,eAIaI,GAAG;AAAA"}},"mtime":1676366792029},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst config = {\n  env: process.env.NODE_ENV || 'development',\n  port: 3001,\n  jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\n  db_name: \"backenddb\",\n  db_username: \"postgres\",\n  db_password: \"admin\",\n  URL_DOMAIN: '/backend',\n  URL_IMAGE: '/backend/images/',\n  URL_API: '/backend/api',\n  UPLOAD_DIR: '/storages'\n};\nvar _default = config;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJwb3J0Iiwiand0U2VjcmV0IiwiSldUX1NFQ1JFVCIsImRiX25hbWUiLCJkYl91c2VybmFtZSIsImRiX3Bhc3N3b3JkIiwiVVJMX0RPTUFJTiIsIlVSTF9JTUFHRSIsIlVSTF9BUEkiLCJVUExPQURfRElSIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL2NvbmZpZy8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb25maWcgPSB7XG4gICAgZW52OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnLFxuICAgIHBvcnQ6IDMwMDEsXG4gICAgand0U2VjcmV0OiBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8IFwiWU9VUl9zZWNyZXRfa2V5XCIsXG4gICAgZGJfbmFtZSA6IFwiYmFja2VuZGRiXCIsXG4gICAgZGJfdXNlcm5hbWUgOiBcInBvc3RncmVzXCIsXG4gICAgZGJfcGFzc3dvcmQ6IFwiYWRtaW5cIixcbiAgICBVUkxfRE9NQUlOIDogJy9iYWNrZW5kJyxcbiAgICBVUkxfSU1BR0UgOiAnL2JhY2tlbmQvaW1hZ2VzLycsXG4gICAgVVJMX0FQSSA6ICcvYmFja2VuZC9hcGknLFxuICAgIFVQTE9BRF9ESVIgOiAnL3N0b3JhZ2VzJ1xuICB9XG4gIFxuZXhwb3J0IGRlZmF1bHQgY29uZmlnIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxNQUFNLEdBQUc7RUFDWEMsR0FBRyxFQUFFQyxPQUFPLENBQUNELEdBQUcsQ0FBQ0UsUUFBUSxJQUFJLGFBQWE7RUFDMUNDLElBQUksRUFBRSxJQUFJO0VBQ1ZDLFNBQVMsRUFBRUgsT0FBTyxDQUFDRCxHQUFHLENBQUNLLFVBQVUsSUFBSSxpQkFBaUI7RUFDdERDLE9BQU8sRUFBRyxXQUFXO0VBQ3JCQyxXQUFXLEVBQUcsVUFBVTtFQUN4QkMsV0FBVyxFQUFFLE9BQU87RUFDcEJDLFVBQVUsRUFBRyxVQUFVO0VBQ3ZCQyxTQUFTLEVBQUcsa0JBQWtCO0VBQzlCQyxPQUFPLEVBQUcsY0FBYztFQUN4QkMsVUFBVSxFQUFHO0FBQ2YsQ0FBQztBQUFBLGVBRVliLE1BQU07QUFBQSJ9","map":{"version":3,"names":["config","env","process","NODE_ENV","port","jwtSecret","JWT_SECRET","db_name","db_username","db_password","URL_DOMAIN","URL_IMAGE","URL_API","UPLOAD_DIR"],"sourceRoot":"/Applications/nodejs/server/server/config/","sources":["config.js"],"sourcesContent":["const config = {\n    env: process.env.NODE_ENV || 'development',\n    port: 3001,\n    jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\n    db_name : \"backenddb\",\n    db_username : \"postgres\",\n    db_password: \"admin\",\n    URL_DOMAIN : '/backend',\n    URL_IMAGE : '/backend/images/',\n    URL_API : '/backend/api',\n    UPLOAD_DIR : '/storages'\n  }\n  \nexport default config"],"mappings":";;;;;;AAAA,MAAMA,MAAM,GAAG;EACXC,GAAG,EAAEC,OAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;EAC1CC,IAAI,EAAE,IAAI;EACVC,SAAS,EAAEH,OAAO,CAACD,GAAG,CAACK,UAAU,IAAI,iBAAiB;EACtDC,OAAO,EAAG,WAAW;EACrBC,WAAW,EAAG,UAAU;EACxBC,WAAW,EAAE,OAAO;EACpBC,UAAU,EAAG,UAAU;EACvBC,SAAS,EAAG,kBAAkB;EAC9BC,OAAO,EAAG,cAAc;EACxBC,UAAU,EAAG;AACf,CAAC;AAAA,eAEYb,MAAM;AAAA"}},"mtime":1676361616411},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/helpers/middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst pinoNoir = require('pino-noir');\nconst pinoLogger = require('express-pino-logger');\nconst {\n  STATUS_CODES\n} = require('http');\nconst logger = () => {\n  return pinoLogger({\n    serializers: pinoNoir(['res.headers.set-cookie', 'req.headers.cookie', 'req.headers.authorization'])\n  });\n};\nconst handleError = (err, req, res, next) => {\n  console.error(err);\n  if (res.headersSent) return next(err);\n  const statusCode = err.statusCode || 500;\n  const errorMessage = STATUS_CODES[statusCode] || 'Internal Error';\n  res.status(statusCode).json({\n    error: errorMessage\n  });\n};\nconst notFound = (req, res) => {\n  res.status(404).json({\n    error: 'Not Found'\n  });\n};\nconst forbidden = next => {\n  const err = new Error(\"Forbidden\");\n  err.statusCode = 403;\n  return next(err);\n};\nconst cors = (req, res, next) => {\n  const origin = req.headers.origin;\n  res.setHeader('Access-Control-Allow-Origin', origin || '*');\n  res.setHeader('Access-Control-Allow-Methods', 'POST, GET, PUT, DELETE, OPTIONS, XMODIFY');\n  res.setHeader('Access-Control-Allow-Credentials', 'true');\n  res.setHeader('Access-Control-Max-Age', '86400');\n  res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept');\n  next();\n};\nvar _default = {\n  logger: logger(),\n  cors,\n  notFound,\n  handleError,\n  forbidden\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaW5vTm9pciIsInJlcXVpcmUiLCJwaW5vTG9nZ2VyIiwiU1RBVFVTX0NPREVTIiwibG9nZ2VyIiwic2VyaWFsaXplcnMiLCJoYW5kbGVFcnJvciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwiZXJyb3IiLCJoZWFkZXJzU2VudCIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJqc29uIiwibm90Rm91bmQiLCJmb3JiaWRkZW4iLCJFcnJvciIsImNvcnMiLCJvcmlnaW4iLCJoZWFkZXJzIiwic2V0SGVhZGVyIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL2hlbHBlcnMvIiwic291cmNlcyI6WyJtaWRkbGV3YXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBpbm9Ob2lyID0gcmVxdWlyZSgncGluby1ub2lyJylcbmNvbnN0IHBpbm9Mb2dnZXIgPSByZXF1aXJlKCdleHByZXNzLXBpbm8tbG9nZ2VyJylcbmNvbnN0IHsgU1RBVFVTX0NPREVTIH0gPSByZXF1aXJlKCdodHRwJylcblxuXG5cbmNvbnN0IGxvZ2dlcj0oKT0+IHtcbiAgICByZXR1cm4gcGlub0xvZ2dlcih7XG4gICAgICAgIHNlcmlhbGl6ZXJzOiBwaW5vTm9pcihbXG4gICAgICAgICAgICAncmVzLmhlYWRlcnMuc2V0LWNvb2tpZScsXG4gICAgICAgICAgICAncmVxLmhlYWRlcnMuY29va2llJyxcbiAgICAgICAgICAgICdyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uJ1xuICAgICAgICBdKVxuICAgIH0pXG59XG5cbmNvbnN0IGhhbmRsZUVycm9yPShlcnIsIHJlcSwgcmVzLCBuZXh0KT0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICBpZiAocmVzLmhlYWRlcnNTZW50KSByZXR1cm4gbmV4dChlcnIpXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVyci5zdGF0dXNDb2RlIHx8IDUwMFxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IFNUQVRVU19DT0RFU1tzdGF0dXNDb2RlXSB8fCAnSW50ZXJuYWwgRXJyb3InXG4gICAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9KVxufVxuXG5jb25zdCBub3RGb3VuZD0ocmVxLCByZXMpPT4ge1xuICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgRm91bmQnIH0pXG59XG5cbmNvbnN0IGZvcmJpZGRlbj0obmV4dCk9PntcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXCJGb3JiaWRkZW5cIilcbiAgICBlcnIuc3RhdHVzQ29kZSA9IDQwMztcbiAgICByZXR1cm4gbmV4dChlcnIpXG59XG5cbmNvbnN0IGNvcnM9KHJlcSwgcmVzLCBuZXh0KT0+IHtcbiAgICBjb25zdCBvcmlnaW4gPSByZXEuaGVhZGVycy5vcmlnaW5cbiAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCBvcmlnaW4gfHwgJyonKVxuICAgIHJlcy5zZXRIZWFkZXIoXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJyxcbiAgICAgICAgJ1BPU1QsIEdFVCwgUFVULCBERUxFVEUsIE9QVElPTlMsIFhNT0RJRlknXG4gICAgKVxuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKVxuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLU1heC1BZ2UnLCAnODY0MDAnKVxuICAgIHJlcy5zZXRIZWFkZXIoXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJyxcbiAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgsIFgtSFRUUC1NZXRob2QtT3ZlcnJpZGUsIENvbnRlbnQtVHlwZSwgQWNjZXB0J1xuXG4gICAgKVxuICAgIG5leHQoKVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBsb2dnZXI6IGxvZ2dlcigpLFxuICAgIGNvcnMsXG4gICAgbm90Rm91bmQsXG4gICAgaGFuZGxlRXJyb3IsXG4gICAgZm9yYmlkZGVuXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDckMsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDakQsTUFBTTtFQUFFRTtBQUFhLENBQUMsR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUl4QyxNQUFNRyxNQUFNLEdBQUMsTUFBSztFQUNkLE9BQU9GLFVBQVUsQ0FBQztJQUNkRyxXQUFXLEVBQUVMLFFBQVEsQ0FBQyxDQUNsQix3QkFBd0IsRUFDeEIsb0JBQW9CLEVBQ3BCLDJCQUEyQixDQUM5QjtFQUNMLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRCxNQUFNTSxXQUFXLEdBQUMsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFJO0VBQ3RDQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0wsR0FBRyxDQUFDO0VBQ2xCLElBQUlFLEdBQUcsQ0FBQ0ksV0FBVyxFQUFFLE9BQU9ILElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ3JDLE1BQU1PLFVBQVUsR0FBR1AsR0FBRyxDQUFDTyxVQUFVLElBQUksR0FBRztFQUN4QyxNQUFNQyxZQUFZLEdBQUdaLFlBQVksQ0FBQ1csVUFBVSxDQUFDLElBQUksZ0JBQWdCO0VBQ2pFTCxHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsVUFBVSxDQUFDLENBQUNHLElBQUksQ0FBQztJQUFFTCxLQUFLLEVBQUVHO0VBQWEsQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFFRCxNQUFNRyxRQUFRLEdBQUMsQ0FBQ1YsR0FBRyxFQUFFQyxHQUFHLEtBQUk7RUFDeEJBLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUwsS0FBSyxFQUFFO0VBQVksQ0FBQyxDQUFDO0FBQ2hELENBQUM7QUFFRCxNQUFNTyxTQUFTLEdBQUVULElBQUksSUFBRztFQUNwQixNQUFNSCxHQUFHLEdBQUcsSUFBSWEsS0FBSyxDQUFDLFdBQVcsQ0FBQztFQUNsQ2IsR0FBRyxDQUFDTyxVQUFVLEdBQUcsR0FBRztFQUNwQixPQUFPSixJQUFJLENBQUNILEdBQUcsQ0FBQztBQUNwQixDQUFDO0FBRUQsTUFBTWMsSUFBSSxHQUFDLENBQUNiLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUk7RUFDMUIsTUFBTVksTUFBTSxHQUFHZCxHQUFHLENBQUNlLE9BQU8sQ0FBQ0QsTUFBTTtFQUNqQ2IsR0FBRyxDQUFDZSxTQUFTLENBQUMsNkJBQTZCLEVBQUVGLE1BQU0sSUFBSSxHQUFHLENBQUM7RUFDM0RiLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QiwwQ0FBMEMsQ0FDN0M7RUFDRGYsR0FBRyxDQUFDZSxTQUFTLENBQUMsa0NBQWtDLEVBQUUsTUFBTSxDQUFDO0VBQ3pEZixHQUFHLENBQUNlLFNBQVMsQ0FBQyx3QkFBd0IsRUFBRSxPQUFPLENBQUM7RUFDaERmLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QixnRUFBZ0UsQ0FFbkU7RUFDRGQsSUFBSSxFQUFFO0FBQ1YsQ0FBQztBQUFBLGVBR2M7RUFDWE4sTUFBTSxFQUFFQSxNQUFNLEVBQUU7RUFDaEJpQixJQUFJO0VBQ0pILFFBQVE7RUFDUlosV0FBVztFQUNYYTtBQUNKLENBQUM7QUFBQSJ9","map":{"version":3,"names":["pinoNoir","require","pinoLogger","STATUS_CODES","logger","serializers","handleError","err","req","res","next","console","error","headersSent","statusCode","errorMessage","status","json","notFound","forbidden","Error","cors","origin","headers","setHeader"],"sourceRoot":"/Applications/nodejs/server/server/helpers/","sources":["middleware.js"],"sourcesContent":["const pinoNoir = require('pino-noir')\nconst pinoLogger = require('express-pino-logger')\nconst { STATUS_CODES } = require('http')\n\n\n\nconst logger=()=> {\n    return pinoLogger({\n        serializers: pinoNoir([\n            'res.headers.set-cookie',\n            'req.headers.cookie',\n            'req.headers.authorization'\n        ])\n    })\n}\n\nconst handleError=(err, req, res, next)=> {\n    console.error(err)\n    if (res.headersSent) return next(err)\n    const statusCode = err.statusCode || 500\n    const errorMessage = STATUS_CODES[statusCode] || 'Internal Error'\n    res.status(statusCode).json({ error: errorMessage })\n}\n\nconst notFound=(req, res)=> {\n    res.status(404).json({ error: 'Not Found' })\n}\n\nconst forbidden=(next)=>{\n    const err = new Error(\"Forbidden\")\n    err.statusCode = 403;\n    return next(err)\n}\n\nconst cors=(req, res, next)=> {\n    const origin = req.headers.origin\n    res.setHeader('Access-Control-Allow-Origin', origin || '*')\n    res.setHeader(\n        'Access-Control-Allow-Methods',\n        'POST, GET, PUT, DELETE, OPTIONS, XMODIFY'\n    )\n    res.setHeader('Access-Control-Allow-Credentials', 'true')\n    res.setHeader('Access-Control-Max-Age', '86400')\n    res.setHeader(\n        'Access-Control-Allow-Headers',\n        'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept'\n\n    )\n    next()\n}\n\n\nexport default {\n    logger: logger(),\n    cors,\n    notFound,\n    handleError,\n    forbidden\n}"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,WAAW,CAAC;AACrC,MAAMC,UAAU,GAAGD,OAAO,CAAC,qBAAqB,CAAC;AACjD,MAAM;EAAEE;AAAa,CAAC,GAAGF,OAAO,CAAC,MAAM,CAAC;AAIxC,MAAMG,MAAM,GAAC,MAAK;EACd,OAAOF,UAAU,CAAC;IACdG,WAAW,EAAEL,QAAQ,CAAC,CAClB,wBAAwB,EACxB,oBAAoB,EACpB,2BAA2B,CAC9B;EACL,CAAC,CAAC;AACN,CAAC;AAED,MAAMM,WAAW,GAAC,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACtCC,OAAO,CAACC,KAAK,CAACL,GAAG,CAAC;EAClB,IAAIE,GAAG,CAACI,WAAW,EAAE,OAAOH,IAAI,CAACH,GAAG,CAAC;EACrC,MAAMO,UAAU,GAAGP,GAAG,CAACO,UAAU,IAAI,GAAG;EACxC,MAAMC,YAAY,GAAGZ,YAAY,CAACW,UAAU,CAAC,IAAI,gBAAgB;EACjEL,GAAG,CAACO,MAAM,CAACF,UAAU,CAAC,CAACG,IAAI,CAAC;IAAEL,KAAK,EAAEG;EAAa,CAAC,CAAC;AACxD,CAAC;AAED,MAAMG,QAAQ,GAAC,CAACV,GAAG,EAAEC,GAAG,KAAI;EACxBA,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEL,KAAK,EAAE;EAAY,CAAC,CAAC;AAChD,CAAC;AAED,MAAMO,SAAS,GAAET,IAAI,IAAG;EACpB,MAAMH,GAAG,GAAG,IAAIa,KAAK,CAAC,WAAW,CAAC;EAClCb,GAAG,CAACO,UAAU,GAAG,GAAG;EACpB,OAAOJ,IAAI,CAACH,GAAG,CAAC;AACpB,CAAC;AAED,MAAMc,IAAI,GAAC,CAACb,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EAC1B,MAAMY,MAAM,GAAGd,GAAG,CAACe,OAAO,CAACD,MAAM;EACjCb,GAAG,CAACe,SAAS,CAAC,6BAA6B,EAAEF,MAAM,IAAI,GAAG,CAAC;EAC3Db,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,0CAA0C,CAC7C;EACDf,GAAG,CAACe,SAAS,CAAC,kCAAkC,EAAE,MAAM,CAAC;EACzDf,GAAG,CAACe,SAAS,CAAC,wBAAwB,EAAE,OAAO,CAAC;EAChDf,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,gEAAgE,CAEnE;EACDd,IAAI,EAAE;AACV,CAAC;AAAA,eAGc;EACXN,MAAM,EAAEA,MAAM,EAAE;EAChBiB,IAAI;EACJH,QAAQ;EACRZ,WAAW;EACXa;AACJ,CAAC;AAAA"}},"mtime":1676361789174},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst config = {\n  env: process.env.NODE_ENV || 'development',\n  port: 3001,\n  jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\n  db_name: \"backenddb\",\n  db_username: \"postgres\",\n  db_password: \"admin\",\n  URL_DOMAIN: '/backend',\n  URL_IMAGE: '/backend/images/',\n  URL_API: '/backend/api',\n  UPLOAD_DIR: '/storages'\n};\nvar _default = config;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJwb3J0Iiwiand0U2VjcmV0IiwiSldUX1NFQ1JFVCIsImRiX25hbWUiLCJkYl91c2VybmFtZSIsImRiX3Bhc3N3b3JkIiwiVVJMX0RPTUFJTiIsIlVSTF9JTUFHRSIsIlVSTF9BUEkiLCJVUExPQURfRElSIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL2NvbmZpZy8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb25maWcgPSB7XG4gICAgZW52OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnLFxuICAgIHBvcnQ6IDMwMDEsXG4gICAgand0U2VjcmV0OiBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8IFwiWU9VUl9zZWNyZXRfa2V5XCIsXG4gICAgZGJfbmFtZSA6IFwiYmFja2VuZGRiXCIsXG4gICAgZGJfdXNlcm5hbWUgOiBcInBvc3RncmVzXCIsXG4gICAgZGJfcGFzc3dvcmQ6IFwiYWRtaW5cIixcbiAgICBVUkxfRE9NQUlOIDogJy9iYWNrZW5kJyxcbiAgICBVUkxfSU1BR0UgOiAnL2JhY2tlbmQvaW1hZ2VzLycsXG4gICAgVVJMX0FQSSA6ICcvYmFja2VuZC9hcGknLFxuICAgIFVQTE9BRF9ESVIgOiAnL3N0b3JhZ2VzJ1xuICB9XG4gIFxuZXhwb3J0IGRlZmF1bHQgY29uZmlnIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxNQUFNLEdBQUc7RUFDWEMsR0FBRyxFQUFFQyxPQUFPLENBQUNELEdBQUcsQ0FBQ0UsUUFBUSxJQUFJLGFBQWE7RUFDMUNDLElBQUksRUFBRSxJQUFJO0VBQ1ZDLFNBQVMsRUFBRUgsT0FBTyxDQUFDRCxHQUFHLENBQUNLLFVBQVUsSUFBSSxpQkFBaUI7RUFDdERDLE9BQU8sRUFBRyxXQUFXO0VBQ3JCQyxXQUFXLEVBQUcsVUFBVTtFQUN4QkMsV0FBVyxFQUFFLE9BQU87RUFDcEJDLFVBQVUsRUFBRyxVQUFVO0VBQ3ZCQyxTQUFTLEVBQUcsa0JBQWtCO0VBQzlCQyxPQUFPLEVBQUcsY0FBYztFQUN4QkMsVUFBVSxFQUFHO0FBQ2YsQ0FBQztBQUFBLGVBRVliLE1BQU07QUFBQSJ9","map":{"version":3,"names":["config","env","process","NODE_ENV","port","jwtSecret","JWT_SECRET","db_name","db_username","db_password","URL_DOMAIN","URL_IMAGE","URL_API","UPLOAD_DIR"],"sourceRoot":"/Applications/nodejs/server/server/config/","sources":["config.js"],"sourcesContent":["const config = {\n    env: process.env.NODE_ENV || 'development',\n    port: 3001,\n    jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\n    db_name : \"backenddb\",\n    db_username : \"postgres\",\n    db_password: \"admin\",\n    URL_DOMAIN : '/backend',\n    URL_IMAGE : '/backend/images/',\n    URL_API : '/backend/api',\n    UPLOAD_DIR : '/storages'\n  }\n  \nexport default config"],"mappings":";;;;;;AAAA,MAAMA,MAAM,GAAG;EACXC,GAAG,EAAEC,OAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;EAC1CC,IAAI,EAAE,IAAI;EACVC,SAAS,EAAEH,OAAO,CAACD,GAAG,CAACK,UAAU,IAAI,iBAAiB;EACtDC,OAAO,EAAG,WAAW;EACrBC,WAAW,EAAG,UAAU;EACxBC,WAAW,EAAE,OAAO;EACpBC,UAAU,EAAG,UAAU;EACvBC,SAAS,EAAG,kBAAkB;EAC9BC,OAAO,EAAG,cAAc;EACxBC,UAAU,EAAG;AACf,CAAC;AAAA,eAEYb,MAAM;AAAA"}},"mtime":1676361616411},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/helpers/middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst pinoNoir = require('pino-noir');\nconst pinoLogger = require('express-pino-logger');\nconst {\n  STATUS_CODES\n} = require('http');\nconst logger = () => {\n  return pinoLogger({\n    serializers: pinoNoir(['res.headers.set-cookie', 'req.headers.cookie', 'req.headers.authorization'])\n  });\n};\nconst handleError = (err, req, res, next) => {\n  console.error(err);\n  if (res.headersSent) return next(err);\n  const statusCode = err.statusCode || 500;\n  const errorMessage = STATUS_CODES[statusCode] || 'Internal Error';\n  res.status(statusCode).json({\n    error: errorMessage\n  });\n};\nconst notFound = (req, res) => {\n  res.status(404).json({\n    error: 'Not Found'\n  });\n};\nconst forbidden = next => {\n  const err = new Error(\"Forbidden\");\n  err.statusCode = 403;\n  return next(err);\n};\nconst cors = (req, res, next) => {\n  const origin = req.headers.origin;\n  res.setHeader('Access-Control-Allow-Origin', origin || '*');\n  res.setHeader('Access-Control-Allow-Methods', 'POST, GET, PUT, DELETE, OPTIONS, XMODIFY');\n  res.setHeader('Access-Control-Allow-Credentials', 'true');\n  res.setHeader('Access-Control-Max-Age', '86400');\n  res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept');\n  next();\n};\nvar _default = {\n  logger: logger(),\n  cors,\n  notFound,\n  handleError,\n  forbidden\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaW5vTm9pciIsInJlcXVpcmUiLCJwaW5vTG9nZ2VyIiwiU1RBVFVTX0NPREVTIiwibG9nZ2VyIiwic2VyaWFsaXplcnMiLCJoYW5kbGVFcnJvciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwiZXJyb3IiLCJoZWFkZXJzU2VudCIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJqc29uIiwibm90Rm91bmQiLCJmb3JiaWRkZW4iLCJFcnJvciIsImNvcnMiLCJvcmlnaW4iLCJoZWFkZXJzIiwic2V0SGVhZGVyIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL2hlbHBlcnMvIiwic291cmNlcyI6WyJtaWRkbGV3YXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBpbm9Ob2lyID0gcmVxdWlyZSgncGluby1ub2lyJylcbmNvbnN0IHBpbm9Mb2dnZXIgPSByZXF1aXJlKCdleHByZXNzLXBpbm8tbG9nZ2VyJylcbmNvbnN0IHsgU1RBVFVTX0NPREVTIH0gPSByZXF1aXJlKCdodHRwJylcblxuXG5cbmNvbnN0IGxvZ2dlcj0oKT0+IHtcbiAgICByZXR1cm4gcGlub0xvZ2dlcih7XG4gICAgICAgIHNlcmlhbGl6ZXJzOiBwaW5vTm9pcihbXG4gICAgICAgICAgICAncmVzLmhlYWRlcnMuc2V0LWNvb2tpZScsXG4gICAgICAgICAgICAncmVxLmhlYWRlcnMuY29va2llJyxcbiAgICAgICAgICAgICdyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uJ1xuICAgICAgICBdKVxuICAgIH0pXG59XG5cbmNvbnN0IGhhbmRsZUVycm9yPShlcnIsIHJlcSwgcmVzLCBuZXh0KT0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICBpZiAocmVzLmhlYWRlcnNTZW50KSByZXR1cm4gbmV4dChlcnIpXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVyci5zdGF0dXNDb2RlIHx8IDUwMFxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IFNUQVRVU19DT0RFU1tzdGF0dXNDb2RlXSB8fCAnSW50ZXJuYWwgRXJyb3InXG4gICAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9KVxufVxuXG5jb25zdCBub3RGb3VuZD0ocmVxLCByZXMpPT4ge1xuICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgRm91bmQnIH0pXG59XG5cbmNvbnN0IGZvcmJpZGRlbj0obmV4dCk9PntcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXCJGb3JiaWRkZW5cIilcbiAgICBlcnIuc3RhdHVzQ29kZSA9IDQwMztcbiAgICByZXR1cm4gbmV4dChlcnIpXG59XG5cbmNvbnN0IGNvcnM9KHJlcSwgcmVzLCBuZXh0KT0+IHtcbiAgICBjb25zdCBvcmlnaW4gPSByZXEuaGVhZGVycy5vcmlnaW5cbiAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCBvcmlnaW4gfHwgJyonKVxuICAgIHJlcy5zZXRIZWFkZXIoXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJyxcbiAgICAgICAgJ1BPU1QsIEdFVCwgUFVULCBERUxFVEUsIE9QVElPTlMsIFhNT0RJRlknXG4gICAgKVxuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKVxuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLU1heC1BZ2UnLCAnODY0MDAnKVxuICAgIHJlcy5zZXRIZWFkZXIoXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJyxcbiAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgsIFgtSFRUUC1NZXRob2QtT3ZlcnJpZGUsIENvbnRlbnQtVHlwZSwgQWNjZXB0J1xuXG4gICAgKVxuICAgIG5leHQoKVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBsb2dnZXI6IGxvZ2dlcigpLFxuICAgIGNvcnMsXG4gICAgbm90Rm91bmQsXG4gICAgaGFuZGxlRXJyb3IsXG4gICAgZm9yYmlkZGVuXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDckMsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDakQsTUFBTTtFQUFFRTtBQUFhLENBQUMsR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUl4QyxNQUFNRyxNQUFNLEdBQUMsTUFBSztFQUNkLE9BQU9GLFVBQVUsQ0FBQztJQUNkRyxXQUFXLEVBQUVMLFFBQVEsQ0FBQyxDQUNsQix3QkFBd0IsRUFDeEIsb0JBQW9CLEVBQ3BCLDJCQUEyQixDQUM5QjtFQUNMLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRCxNQUFNTSxXQUFXLEdBQUMsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFJO0VBQ3RDQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0wsR0FBRyxDQUFDO0VBQ2xCLElBQUlFLEdBQUcsQ0FBQ0ksV0FBVyxFQUFFLE9BQU9ILElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ3JDLE1BQU1PLFVBQVUsR0FBR1AsR0FBRyxDQUFDTyxVQUFVLElBQUksR0FBRztFQUN4QyxNQUFNQyxZQUFZLEdBQUdaLFlBQVksQ0FBQ1csVUFBVSxDQUFDLElBQUksZ0JBQWdCO0VBQ2pFTCxHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsVUFBVSxDQUFDLENBQUNHLElBQUksQ0FBQztJQUFFTCxLQUFLLEVBQUVHO0VBQWEsQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFFRCxNQUFNRyxRQUFRLEdBQUMsQ0FBQ1YsR0FBRyxFQUFFQyxHQUFHLEtBQUk7RUFDeEJBLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUwsS0FBSyxFQUFFO0VBQVksQ0FBQyxDQUFDO0FBQ2hELENBQUM7QUFFRCxNQUFNTyxTQUFTLEdBQUVULElBQUksSUFBRztFQUNwQixNQUFNSCxHQUFHLEdBQUcsSUFBSWEsS0FBSyxDQUFDLFdBQVcsQ0FBQztFQUNsQ2IsR0FBRyxDQUFDTyxVQUFVLEdBQUcsR0FBRztFQUNwQixPQUFPSixJQUFJLENBQUNILEdBQUcsQ0FBQztBQUNwQixDQUFDO0FBRUQsTUFBTWMsSUFBSSxHQUFDLENBQUNiLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUk7RUFDMUIsTUFBTVksTUFBTSxHQUFHZCxHQUFHLENBQUNlLE9BQU8sQ0FBQ0QsTUFBTTtFQUNqQ2IsR0FBRyxDQUFDZSxTQUFTLENBQUMsNkJBQTZCLEVBQUVGLE1BQU0sSUFBSSxHQUFHLENBQUM7RUFDM0RiLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QiwwQ0FBMEMsQ0FDN0M7RUFDRGYsR0FBRyxDQUFDZSxTQUFTLENBQUMsa0NBQWtDLEVBQUUsTUFBTSxDQUFDO0VBQ3pEZixHQUFHLENBQUNlLFNBQVMsQ0FBQyx3QkFBd0IsRUFBRSxPQUFPLENBQUM7RUFDaERmLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QixnRUFBZ0UsQ0FFbkU7RUFDRGQsSUFBSSxFQUFFO0FBQ1YsQ0FBQztBQUFBLGVBR2M7RUFDWE4sTUFBTSxFQUFFQSxNQUFNLEVBQUU7RUFDaEJpQixJQUFJO0VBQ0pILFFBQVE7RUFDUlosV0FBVztFQUNYYTtBQUNKLENBQUM7QUFBQSJ9","map":{"version":3,"names":["pinoNoir","require","pinoLogger","STATUS_CODES","logger","serializers","handleError","err","req","res","next","console","error","headersSent","statusCode","errorMessage","status","json","notFound","forbidden","Error","cors","origin","headers","setHeader"],"sourceRoot":"/Applications/nodejs/server/server/helpers/","sources":["middleware.js"],"sourcesContent":["const pinoNoir = require('pino-noir')\nconst pinoLogger = require('express-pino-logger')\nconst { STATUS_CODES } = require('http')\n\n\n\nconst logger=()=> {\n    return pinoLogger({\n        serializers: pinoNoir([\n            'res.headers.set-cookie',\n            'req.headers.cookie',\n            'req.headers.authorization'\n        ])\n    })\n}\n\nconst handleError=(err, req, res, next)=> {\n    console.error(err)\n    if (res.headersSent) return next(err)\n    const statusCode = err.statusCode || 500\n    const errorMessage = STATUS_CODES[statusCode] || 'Internal Error'\n    res.status(statusCode).json({ error: errorMessage })\n}\n\nconst notFound=(req, res)=> {\n    res.status(404).json({ error: 'Not Found' })\n}\n\nconst forbidden=(next)=>{\n    const err = new Error(\"Forbidden\")\n    err.statusCode = 403;\n    return next(err)\n}\n\nconst cors=(req, res, next)=> {\n    const origin = req.headers.origin\n    res.setHeader('Access-Control-Allow-Origin', origin || '*')\n    res.setHeader(\n        'Access-Control-Allow-Methods',\n        'POST, GET, PUT, DELETE, OPTIONS, XMODIFY'\n    )\n    res.setHeader('Access-Control-Allow-Credentials', 'true')\n    res.setHeader('Access-Control-Max-Age', '86400')\n    res.setHeader(\n        'Access-Control-Allow-Headers',\n        'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept'\n\n    )\n    next()\n}\n\n\nexport default {\n    logger: logger(),\n    cors,\n    notFound,\n    handleError,\n    forbidden\n}"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,WAAW,CAAC;AACrC,MAAMC,UAAU,GAAGD,OAAO,CAAC,qBAAqB,CAAC;AACjD,MAAM;EAAEE;AAAa,CAAC,GAAGF,OAAO,CAAC,MAAM,CAAC;AAIxC,MAAMG,MAAM,GAAC,MAAK;EACd,OAAOF,UAAU,CAAC;IACdG,WAAW,EAAEL,QAAQ,CAAC,CAClB,wBAAwB,EACxB,oBAAoB,EACpB,2BAA2B,CAC9B;EACL,CAAC,CAAC;AACN,CAAC;AAED,MAAMM,WAAW,GAAC,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACtCC,OAAO,CAACC,KAAK,CAACL,GAAG,CAAC;EAClB,IAAIE,GAAG,CAACI,WAAW,EAAE,OAAOH,IAAI,CAACH,GAAG,CAAC;EACrC,MAAMO,UAAU,GAAGP,GAAG,CAACO,UAAU,IAAI,GAAG;EACxC,MAAMC,YAAY,GAAGZ,YAAY,CAACW,UAAU,CAAC,IAAI,gBAAgB;EACjEL,GAAG,CAACO,MAAM,CAACF,UAAU,CAAC,CAACG,IAAI,CAAC;IAAEL,KAAK,EAAEG;EAAa,CAAC,CAAC;AACxD,CAAC;AAED,MAAMG,QAAQ,GAAC,CAACV,GAAG,EAAEC,GAAG,KAAI;EACxBA,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEL,KAAK,EAAE;EAAY,CAAC,CAAC;AAChD,CAAC;AAED,MAAMO,SAAS,GAAET,IAAI,IAAG;EACpB,MAAMH,GAAG,GAAG,IAAIa,KAAK,CAAC,WAAW,CAAC;EAClCb,GAAG,CAACO,UAAU,GAAG,GAAG;EACpB,OAAOJ,IAAI,CAACH,GAAG,CAAC;AACpB,CAAC;AAED,MAAMc,IAAI,GAAC,CAACb,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EAC1B,MAAMY,MAAM,GAAGd,GAAG,CAACe,OAAO,CAACD,MAAM;EACjCb,GAAG,CAACe,SAAS,CAAC,6BAA6B,EAAEF,MAAM,IAAI,GAAG,CAAC;EAC3Db,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,0CAA0C,CAC7C;EACDf,GAAG,CAACe,SAAS,CAAC,kCAAkC,EAAE,MAAM,CAAC;EACzDf,GAAG,CAACe,SAAS,CAAC,wBAAwB,EAAE,OAAO,CAAC;EAChDf,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,gEAAgE,CAEnE;EACDd,IAAI,EAAE;AACV,CAAC;AAAA,eAGc;EACXN,MAAM,EAAEA,MAAM,EAAE;EAChBiB,IAAI;EACJH,QAAQ;EACRZ,WAAW;EACXa;AACJ,CAAC;AAAA"}},"mtime":1676361789174},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/models/init-models.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sequelize = exports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nvar _roles2 = _interopRequireDefault(require(\"./roles.js\"));\nvar _user_roles2 = _interopRequireDefault(require(\"./user_roles.js\"));\nvar _users2 = _interopRequireDefault(require(\"./users.js\"));\nvar _config = _interopRequireDefault(require(\"../config/config.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst DataTypes = _sequelize2.default.DataTypes;\nconst sequelize = new _sequelize2.default(_config.default.db_name, _config.default.db_username, _config.default.db_password, {\n  dialect: \"postgres\",\n  pool: {\n    max: 5,\n    min: 0,\n    acquire: 30000,\n    idle: 10000\n  }\n});\nexports.sequelize = sequelize;\nconst initModels = sequelize => {\n  const roles = _roles2.default.init(sequelize, DataTypes);\n  const user_roles = _user_roles2.default.init(sequelize, DataTypes);\n  const users = _users2.default.init(sequelize, DataTypes);\n  user_roles.belongsTo(roles, {\n    foreignKey: \"usro_role_id\"\n  });\n  roles.hasMany(user_roles, {\n    foreignKey: \"usro_role_id\"\n  });\n  user_roles.belongsTo(users, {\n    foreignKey: \"usro_user_id\"\n  });\n  users.hasMany(user_roles, {\n    foreignKey: \"usro_user_id\"\n  });\n  return {\n    roles,\n    user_roles,\n    users\n  };\n};\nconst models = initModels(sequelize);\nvar _default = models;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJfc2VxdWVsaXplIiwic2VxdWVsaXplIiwiU2VxdWVsaXplIiwiY29uZmlnIiwiZGJfbmFtZSIsImRiX3VzZXJuYW1lIiwiZGJfcGFzc3dvcmQiLCJkaWFsZWN0IiwicG9vbCIsIm1heCIsIm1pbiIsImFjcXVpcmUiLCJpZGxlIiwiaW5pdE1vZGVscyIsInJvbGVzIiwiX3JvbGVzIiwiaW5pdCIsInVzZXJfcm9sZXMiLCJfdXNlcl9yb2xlcyIsInVzZXJzIiwiX3VzZXJzIiwiYmVsb25nc1RvIiwiZm9yZWlnbktleSIsImhhc01hbnkiLCJtb2RlbHMiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvbm9kZWpzL3NlcnZlci9zZXJ2ZXIvbW9kZWxzLyIsInNvdXJjZXMiOlsiaW5pdC1tb2RlbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgX3NlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5jb25zdCBEYXRhVHlwZXMgPSBfc2VxdWVsaXplLkRhdGFUeXBlcztcbmltcG9ydCBfcm9sZXMgZnJvbSAgXCIuL3JvbGVzLmpzXCI7XG5pbXBvcnQgX3VzZXJfcm9sZXMgZnJvbSAgXCIuL3VzZXJfcm9sZXMuanNcIjtcbmltcG9ydCBfdXNlcnMgZnJvbSAgXCIuL3VzZXJzLmpzXCI7XG5cbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9jb25maWcuanNcIjtcblxuY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShcbmNvbmZpZy5kYl9uYW1lLFxuY29uZmlnLmRiX3VzZXJuYW1lLFxuY29uZmlnLmRiX3Bhc3N3b3JkLFxue1xuICBkaWFsZWN0IDogXCJwb3N0Z3Jlc1wiLFxuICBwb29sIDoge1xuICAgIG1heCA6IDUsXG4gICAgbWluIDogMCxcbiAgICBhY3F1aXJlIDogMzAwMDAsXG4gICAgaWRsZSA6IDEwMDAwLFxuICB9XG59XG4pXG5cbmNvbnN0IGluaXRNb2RlbHMgPSAoc2VxdWVsaXplKSA9PiB7XG4gIGNvbnN0IHJvbGVzID0gX3JvbGVzLmluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpO1xuICBjb25zdCB1c2VyX3JvbGVzID0gX3VzZXJfcm9sZXMuaW5pdChzZXF1ZWxpemUsIERhdGFUeXBlcyk7XG4gIGNvbnN0IHVzZXJzID0gX3VzZXJzLmluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpO1xuXG4gIHVzZXJfcm9sZXMuYmVsb25nc1RvKHJvbGVzLCB7IGZvcmVpZ25LZXk6IFwidXNyb19yb2xlX2lkXCJ9KTtcbiAgcm9sZXMuaGFzTWFueSh1c2VyX3JvbGVzLCB7IGZvcmVpZ25LZXk6IFwidXNyb19yb2xlX2lkXCJ9KTtcbiAgdXNlcl9yb2xlcy5iZWxvbmdzVG8odXNlcnMsIHsgZm9yZWlnbktleTogXCJ1c3JvX3VzZXJfaWRcIn0pO1xuICB1c2Vycy5oYXNNYW55KHVzZXJfcm9sZXMsIHsgZm9yZWlnbktleTogXCJ1c3JvX3VzZXJfaWRcIn0pO1xuXG4gIHJldHVybiB7XG4gICAgcm9sZXMsXG4gICAgdXNlcl9yb2xlcyxcbiAgICB1c2VycyxcbiAgfTtcbn1cblxuY29uc3QgbW9kZWxzID0gaW5pdE1vZGVscyhzZXF1ZWxpemUpO1xuXG5leHBvcnQgZGVmYXVsdCBtb2RlbHM7XG5leHBvcnQge3NlcXVlbGl6ZX07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFBeUM7QUFMekMsTUFBTUEsU0FBUyxHQUFHQyxtQkFBVSxDQUFDRCxTQUFTO0FBT3RDLE1BQU1FLFNBQVMsR0FBRyxJQUFJQyxtQkFBUyxDQUMvQkMsZUFBTSxDQUFDQyxPQUFPLEVBQ2RELGVBQU0sQ0FBQ0UsV0FBVyxFQUNsQkYsZUFBTSxDQUFDRyxXQUFXLEVBQ2xCO0VBQ0VDLE9BQU8sRUFBRyxVQUFVO0VBQ3BCQyxJQUFJLEVBQUc7SUFDTEMsR0FBRyxFQUFHLENBQUM7SUFDUEMsR0FBRyxFQUFHLENBQUM7SUFDUEMsT0FBTyxFQUFHLEtBQUs7SUFDZkMsSUFBSSxFQUFHO0VBQ1Q7QUFDRixDQUFDLENBQ0E7QUFBQTtBQUVELE1BQU1DLFVBQVUsR0FBSVosU0FBUyxJQUFLO0VBQ2hDLE1BQU1hLEtBQUssR0FBR0MsZUFBTSxDQUFDQyxJQUFJLENBQUNmLFNBQVMsRUFBRUYsU0FBUyxDQUFDO0VBQy9DLE1BQU1rQixVQUFVLEdBQUdDLG9CQUFXLENBQUNGLElBQUksQ0FBQ2YsU0FBUyxFQUFFRixTQUFTLENBQUM7RUFDekQsTUFBTW9CLEtBQUssR0FBR0MsZUFBTSxDQUFDSixJQUFJLENBQUNmLFNBQVMsRUFBRUYsU0FBUyxDQUFDO0VBRS9Da0IsVUFBVSxDQUFDSSxTQUFTLENBQUNQLEtBQUssRUFBRTtJQUFFUSxVQUFVLEVBQUU7RUFBYyxDQUFDLENBQUM7RUFDMURSLEtBQUssQ0FBQ1MsT0FBTyxDQUFDTixVQUFVLEVBQUU7SUFBRUssVUFBVSxFQUFFO0VBQWMsQ0FBQyxDQUFDO0VBQ3hETCxVQUFVLENBQUNJLFNBQVMsQ0FBQ0YsS0FBSyxFQUFFO0lBQUVHLFVBQVUsRUFBRTtFQUFjLENBQUMsQ0FBQztFQUMxREgsS0FBSyxDQUFDSSxPQUFPLENBQUNOLFVBQVUsRUFBRTtJQUFFSyxVQUFVLEVBQUU7RUFBYyxDQUFDLENBQUM7RUFFeEQsT0FBTztJQUNMUixLQUFLO0lBQ0xHLFVBQVU7SUFDVkU7RUFDRixDQUFDO0FBQ0gsQ0FBQztBQUVELE1BQU1LLE1BQU0sR0FBR1gsVUFBVSxDQUFDWixTQUFTLENBQUM7QUFBQyxlQUV0QnVCLE1BQU07QUFBQSJ9","map":{"version":3,"names":["DataTypes","_sequelize","sequelize","Sequelize","config","db_name","db_username","db_password","dialect","pool","max","min","acquire","idle","initModels","roles","_roles","init","user_roles","_user_roles","users","_users","belongsTo","foreignKey","hasMany","models"],"sourceRoot":"/Applications/nodejs/server/server/models/","sources":["init-models.js"],"sourcesContent":["import Sequelize from \"sequelize\";\nimport _sequelize from \"sequelize\";\nconst DataTypes = _sequelize.DataTypes;\nimport _roles from  \"./roles.js\";\nimport _user_roles from  \"./user_roles.js\";\nimport _users from  \"./users.js\";\n\nimport config from \"../config/config.js\";\n\nconst sequelize = new Sequelize(\nconfig.db_name,\nconfig.db_username,\nconfig.db_password,\n{\n  dialect : \"postgres\",\n  pool : {\n    max : 5,\n    min : 0,\n    acquire : 30000,\n    idle : 10000,\n  }\n}\n)\n\nconst initModels = (sequelize) => {\n  const roles = _roles.init(sequelize, DataTypes);\n  const user_roles = _user_roles.init(sequelize, DataTypes);\n  const users = _users.init(sequelize, DataTypes);\n\n  user_roles.belongsTo(roles, { foreignKey: \"usro_role_id\"});\n  roles.hasMany(user_roles, { foreignKey: \"usro_role_id\"});\n  user_roles.belongsTo(users, { foreignKey: \"usro_user_id\"});\n  users.hasMany(user_roles, { foreignKey: \"usro_user_id\"});\n\n  return {\n    roles,\n    user_roles,\n    users,\n  };\n}\n\nconst models = initModels(sequelize);\n\nexport default models;\nexport {sequelize};\n"],"mappings":";;;;;;AAAA;AAGA;AACA;AACA;AAEA;AAAyC;AALzC,MAAMA,SAAS,GAAGC,mBAAU,CAACD,SAAS;AAOtC,MAAME,SAAS,GAAG,IAAIC,mBAAS,CAC/BC,eAAM,CAACC,OAAO,EACdD,eAAM,CAACE,WAAW,EAClBF,eAAM,CAACG,WAAW,EAClB;EACEC,OAAO,EAAG,UAAU;EACpBC,IAAI,EAAG;IACLC,GAAG,EAAG,CAAC;IACPC,GAAG,EAAG,CAAC;IACPC,OAAO,EAAG,KAAK;IACfC,IAAI,EAAG;EACT;AACF,CAAC,CACA;AAAA;AAED,MAAMC,UAAU,GAAIZ,SAAS,IAAK;EAChC,MAAMa,KAAK,GAAGC,eAAM,CAACC,IAAI,CAACf,SAAS,EAAEF,SAAS,CAAC;EAC/C,MAAMkB,UAAU,GAAGC,oBAAW,CAACF,IAAI,CAACf,SAAS,EAAEF,SAAS,CAAC;EACzD,MAAMoB,KAAK,GAAGC,eAAM,CAACJ,IAAI,CAACf,SAAS,EAAEF,SAAS,CAAC;EAE/CkB,UAAU,CAACI,SAAS,CAACP,KAAK,EAAE;IAAEQ,UAAU,EAAE;EAAc,CAAC,CAAC;EAC1DR,KAAK,CAACS,OAAO,CAACN,UAAU,EAAE;IAAEK,UAAU,EAAE;EAAc,CAAC,CAAC;EACxDL,UAAU,CAACI,SAAS,CAACF,KAAK,EAAE;IAAEG,UAAU,EAAE;EAAc,CAAC,CAAC;EAC1DH,KAAK,CAACI,OAAO,CAACN,UAAU,EAAE;IAAEK,UAAU,EAAE;EAAc,CAAC,CAAC;EAExD,OAAO;IACLR,KAAK;IACLG,UAAU;IACVE;EACF,CAAC;AACH,CAAC;AAED,MAAMK,MAAM,GAAGX,UAAU,CAACZ,SAAS,CAAC;AAAC,eAEtBuB,MAAM;AAAA"}},"mtime":1676371410299},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/models/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass roles extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      role_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      role_name: {\n        type: DataTypes.STRING(25),\n        allowNull: true\n      }\n    }, {\n      sequelize,\n      tableName: 'roles',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"role_id_pk\",\n        unique: true,\n        fields: [{\n          name: \"role_id\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = roles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJyb2xlcyIsImluaXQiLCJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJyb2xlX2lkIiwiYXV0b0luY3JlbWVudCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInJvbGVfbmFtZSIsIlNUUklORyIsInRhYmxlTmFtZSIsInNjaGVtYSIsInRpbWVzdGFtcHMiLCJpbmRleGVzIiwibmFtZSIsInVuaXF1ZSIsImZpZWxkcyJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9ub2RlanMvc2VydmVyL3NlcnZlci9tb2RlbHMvIiwic291cmNlcyI6WyJyb2xlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX3NlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuY29uc3QgeyBNb2RlbCwgU2VxdWVsaXplIH0gPSBfc2VxdWVsaXplO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyByb2xlcyBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpIHtcbiAgcmV0dXJuIHN1cGVyLmluaXQoe1xuICAgIHJvbGVfaWQ6IHtcbiAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBwcmltYXJ5S2V5OiB0cnVlXG4gICAgfSxcbiAgICByb2xlX25hbWU6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoMjUpLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlXG4gICAgfVxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ3JvbGVzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJyb2xlX2lkX3BrXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInJvbGVfaWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgIF1cbiAgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFDbkMsTUFBTTtFQUFFQSxLQUFLO0VBQUVDO0FBQVUsQ0FBQyxHQUFHQyxtQkFBVTtBQUV4QixNQUFNQyxLQUFLLFNBQVNILEtBQUssQ0FBQztFQUN2QyxPQUFPSSxJQUFJLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ2xDLE9BQU8sS0FBSyxDQUFDRixJQUFJLENBQUM7TUFDaEJHLE9BQU8sRUFBRTtRQUNQQyxhQUFhLEVBQUUsSUFBSTtRQUNuQkMsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxLQUFLO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDO01BQ0RDLFNBQVMsRUFBRTtRQUNUSixJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFO01BQ2I7SUFDRixDQUFDLEVBQUU7TUFDRE4sU0FBUztNQUNUVSxTQUFTLEVBQUUsT0FBTztNQUNsQkMsTUFBTSxFQUFFLFFBQVE7TUFDaEJDLFVBQVUsRUFBRSxLQUFLO01BQ2pCQyxPQUFPLEVBQUUsQ0FDUDtRQUNFQyxJQUFJLEVBQUUsWUFBWTtRQUNsQkMsTUFBTSxFQUFFLElBQUk7UUFDWkMsTUFBTSxFQUFFLENBQ047VUFBRUYsSUFBSSxFQUFFO1FBQVUsQ0FBQztNQUV2QixDQUFDO0lBRUwsQ0FBQyxDQUFDO0VBQ0Y7QUFDRjtBQUFDIn0=","map":{"version":3,"names":["Model","Sequelize","_sequelize","roles","init","sequelize","DataTypes","role_id","autoIncrement","type","INTEGER","allowNull","primaryKey","role_name","STRING","tableName","schema","timestamps","indexes","name","unique","fields"],"sourceRoot":"/Applications/nodejs/server/server/models/","sources":["roles.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class roles extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    role_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    role_name: {\n      type: DataTypes.STRING(25),\n      allowNull: true\n    }\n  }, {\n    sequelize,\n    tableName: 'roles',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"role_id_pk\",\n        unique: true,\n        fields: [\n          { name: \"role_id\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,KAAK,SAASH,KAAK,CAAC;EACvC,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,SAAS,EAAE;QACTJ,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE;MACb;IACF,CAAC,EAAE;MACDN,SAAS;MACTU,SAAS,EAAE,OAAO;MAClBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,YAAY;QAClBC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,CACN;UAAEF,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1676370401662},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/models/user_roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass user_roles extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      usro_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      usro_user_id: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n        references: {\n          model: 'users',\n          key: 'user_id'\n        }\n      },\n      usro_role_id: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n        references: {\n          model: 'roles',\n          key: 'role_id'\n        }\n      }\n    }, {\n      sequelize,\n      tableName: 'user_roles',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"usro_id_pk\",\n        unique: true,\n        fields: [{\n          name: \"usro_id\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = user_roles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJ1c2VyX3JvbGVzIiwiaW5pdCIsInNlcXVlbGl6ZSIsIkRhdGFUeXBlcyIsInVzcm9faWQiLCJhdXRvSW5jcmVtZW50IiwidHlwZSIsIklOVEVHRVIiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidXNyb191c2VyX2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwia2V5IiwidXNyb19yb2xlX2lkIiwidGFibGVOYW1lIiwic2NoZW1hIiwidGltZXN0YW1wcyIsImluZGV4ZXMiLCJuYW1lIiwidW5pcXVlIiwiZmllbGRzIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXJfcm9sZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9zZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmNvbnN0IHsgTW9kZWwsIFNlcXVlbGl6ZSB9ID0gX3NlcXVlbGl6ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdXNlcl9yb2xlcyBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpIHtcbiAgcmV0dXJuIHN1cGVyLmluaXQoe1xuICAgIHVzcm9faWQ6IHtcbiAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBwcmltYXJ5S2V5OiB0cnVlXG4gICAgfSxcbiAgICB1c3JvX3VzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICBtb2RlbDogJ3VzZXJzJyxcbiAgICAgICAga2V5OiAndXNlcl9pZCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHVzcm9fcm9sZV9pZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgIG1vZGVsOiAncm9sZXMnLFxuICAgICAgICBrZXk6ICdyb2xlX2lkJ1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICB0YWJsZU5hbWU6ICd1c2VyX3JvbGVzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c3JvX2lkX3BrXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzcm9faWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgIF1cbiAgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFDbkMsTUFBTTtFQUFFQSxLQUFLO0VBQUVDO0FBQVUsQ0FBQyxHQUFHQyxtQkFBVTtBQUV4QixNQUFNQyxVQUFVLFNBQVNILEtBQUssQ0FBQztFQUM1QyxPQUFPSSxJQUFJLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ2xDLE9BQU8sS0FBSyxDQUFDRixJQUFJLENBQUM7TUFDaEJHLE9BQU8sRUFBRTtRQUNQQyxhQUFhLEVBQUUsSUFBSTtRQUNuQkMsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxLQUFLO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDO01BQ0RDLFlBQVksRUFBRTtRQUNaSixJQUFJLEVBQUVILFNBQVMsQ0FBQ0ksT0FBTztRQUN2QkMsU0FBUyxFQUFFLElBQUk7UUFDZkcsVUFBVSxFQUFFO1VBQ1ZDLEtBQUssRUFBRSxPQUFPO1VBQ2RDLEdBQUcsRUFBRTtRQUNQO01BQ0YsQ0FBQztNQUNEQyxZQUFZLEVBQUU7UUFDWlIsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxJQUFJO1FBQ2ZHLFVBQVUsRUFBRTtVQUNWQyxLQUFLLEVBQUUsT0FBTztVQUNkQyxHQUFHLEVBQUU7UUFDUDtNQUNGO0lBQ0YsQ0FBQyxFQUFFO01BQ0RYLFNBQVM7TUFDVGEsU0FBUyxFQUFFLFlBQVk7TUFDdkJDLE1BQU0sRUFBRSxRQUFRO01BQ2hCQyxVQUFVLEVBQUUsS0FBSztNQUNqQkMsT0FBTyxFQUFFLENBQ1A7UUFDRUMsSUFBSSxFQUFFLFlBQVk7UUFDbEJDLE1BQU0sRUFBRSxJQUFJO1FBQ1pDLE1BQU0sRUFBRSxDQUNOO1VBQUVGLElBQUksRUFBRTtRQUFVLENBQUM7TUFFdkIsQ0FBQztJQUVMLENBQUMsQ0FBQztFQUNGO0FBQ0Y7QUFBQyJ9","map":{"version":3,"names":["Model","Sequelize","_sequelize","user_roles","init","sequelize","DataTypes","usro_id","autoIncrement","type","INTEGER","allowNull","primaryKey","usro_user_id","references","model","key","usro_role_id","tableName","schema","timestamps","indexes","name","unique","fields"],"sourceRoot":"/Applications/nodejs/server/server/models/","sources":["user_roles.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class user_roles extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    usro_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    usro_user_id: {\n      type: DataTypes.INTEGER,\n      allowNull: true,\n      references: {\n        model: 'users',\n        key: 'user_id'\n      }\n    },\n    usro_role_id: {\n      type: DataTypes.INTEGER,\n      allowNull: true,\n      references: {\n        model: 'roles',\n        key: 'role_id'\n      }\n    }\n  }, {\n    sequelize,\n    tableName: 'user_roles',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"usro_id_pk\",\n        unique: true,\n        fields: [\n          { name: \"usro_id\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,UAAU,SAASH,KAAK,CAAC;EAC5C,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,YAAY,EAAE;QACZJ,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,IAAI;QACfG,UAAU,EAAE;UACVC,KAAK,EAAE,OAAO;UACdC,GAAG,EAAE;QACP;MACF,CAAC;MACDC,YAAY,EAAE;QACZR,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,IAAI;QACfG,UAAU,EAAE;UACVC,KAAK,EAAE,OAAO;UACdC,GAAG,EAAE;QACP;MACF;IACF,CAAC,EAAE;MACDX,SAAS;MACTa,SAAS,EAAE,YAAY;MACvBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,YAAY;QAClBC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,CACN;UAAEF,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1676370401670},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/models/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass users extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      user_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      user_name: {\n        type: DataTypes.STRING(20),\n        allowNull: true,\n        unique: \"user_name_uq\"\n      },\n      user_email: {\n        type: DataTypes.STRING(55),\n        allowNull: true,\n        unique: \"user_email_uq\"\n      },\n      user_password: {\n        type: DataTypes.STRING(255),\n        allowNull: true\n      },\n      user_handphone: {\n        type: DataTypes.STRING(15),\n        allowNull: true,\n        unique: \"user_handphone_uq\"\n      }\n    }, {\n      sequelize,\n      tableName: 'users',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"user_email_uq\",\n        unique: true,\n        fields: [{\n          name: \"user_email\"\n        }]\n      }, {\n        name: \"user_handphone_uq\",\n        unique: true,\n        fields: [{\n          name: \"user_handphone\"\n        }]\n      }, {\n        name: \"user_id_pk\",\n        unique: true,\n        fields: [{\n          name: \"user_id\"\n        }]\n      }, {\n        name: \"user_name_uq\",\n        unique: true,\n        fields: [{\n          name: \"user_name\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = users;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJ1c2VycyIsImluaXQiLCJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJ1c2VyX2lkIiwiYXV0b0luY3JlbWVudCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInVzZXJfbmFtZSIsIlNUUklORyIsInVuaXF1ZSIsInVzZXJfZW1haWwiLCJ1c2VyX3Bhc3N3b3JkIiwidXNlcl9oYW5kcGhvbmUiLCJ0YWJsZU5hbWUiLCJzY2hlbWEiLCJ0aW1lc3RhbXBzIiwiaW5kZXhlcyIsIm5hbWUiLCJmaWVsZHMiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvbm9kZWpzL3NlcnZlci9zZXJ2ZXIvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9zZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmNvbnN0IHsgTW9kZWwsIFNlcXVlbGl6ZSB9ID0gX3NlcXVlbGl6ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdXNlcnMgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSB7XG4gIHJldHVybiBzdXBlci5pbml0KHtcbiAgICB1c2VyX2lkOiB7XG4gICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZVxuICAgIH0sXG4gICAgdXNlcl9uYW1lOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDIwKSxcbiAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogXCJ1c2VyX25hbWVfdXFcIlxuICAgIH0sXG4gICAgdXNlcl9lbWFpbDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyg1NSksXG4gICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICB1bmlxdWU6IFwidXNlcl9lbWFpbF91cVwiXG4gICAgfSxcbiAgICB1c2VyX3Bhc3N3b3JkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDI1NSksXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIHVzZXJfaGFuZHBob25lOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDE1KSxcbiAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogXCJ1c2VyX2hhbmRwaG9uZV91cVwiXG4gICAgfVxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ3VzZXJzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2VyX2VtYWlsX3VxXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfZW1haWxcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInVzZXJfaGFuZHBob25lX3VxXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfaGFuZHBob25lXCIgfSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2VyX2lkX3BrXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfaWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInVzZXJfbmFtZV91cVwiLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIGZpZWxkczogW1xuICAgICAgICAgIHsgbmFtZTogXCJ1c2VyX25hbWVcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgIF1cbiAgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFDbkMsTUFBTTtFQUFFQSxLQUFLO0VBQUVDO0FBQVUsQ0FBQyxHQUFHQyxtQkFBVTtBQUV4QixNQUFNQyxLQUFLLFNBQVNILEtBQUssQ0FBQztFQUN2QyxPQUFPSSxJQUFJLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ2xDLE9BQU8sS0FBSyxDQUFDRixJQUFJLENBQUM7TUFDaEJHLE9BQU8sRUFBRTtRQUNQQyxhQUFhLEVBQUUsSUFBSTtRQUNuQkMsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxLQUFLO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDO01BQ0RDLFNBQVMsRUFBRTtRQUNUSixJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFLElBQUk7UUFDZkksTUFBTSxFQUFFO01BQ1YsQ0FBQztNQUNEQyxVQUFVLEVBQUU7UUFDVlAsSUFBSSxFQUFFSCxTQUFTLENBQUNRLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDMUJILFNBQVMsRUFBRSxJQUFJO1FBQ2ZJLE1BQU0sRUFBRTtNQUNWLENBQUM7TUFDREUsYUFBYSxFQUFFO1FBQ2JSLElBQUksRUFBRUgsU0FBUyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzNCSCxTQUFTLEVBQUU7TUFDYixDQUFDO01BQ0RPLGNBQWMsRUFBRTtRQUNkVCxJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFLElBQUk7UUFDZkksTUFBTSxFQUFFO01BQ1Y7SUFDRixDQUFDLEVBQUU7TUFDRFYsU0FBUztNQUNUYyxTQUFTLEVBQUUsT0FBTztNQUNsQkMsTUFBTSxFQUFFLFFBQVE7TUFDaEJDLFVBQVUsRUFBRSxLQUFLO01BQ2pCQyxPQUFPLEVBQUUsQ0FDUDtRQUNFQyxJQUFJLEVBQUUsZUFBZTtRQUNyQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQWEsQ0FBQztNQUUxQixDQUFDLEVBQ0Q7UUFDRUEsSUFBSSxFQUFFLG1CQUFtQjtRQUN6QlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQWlCLENBQUM7TUFFOUIsQ0FBQyxFQUNEO1FBQ0VBLElBQUksRUFBRSxZQUFZO1FBQ2xCUixNQUFNLEVBQUUsSUFBSTtRQUNaUyxNQUFNLEVBQUUsQ0FDTjtVQUFFRCxJQUFJLEVBQUU7UUFBVSxDQUFDO01BRXZCLENBQUMsRUFDRDtRQUNFQSxJQUFJLEVBQUUsY0FBYztRQUNwQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQVksQ0FBQztNQUV6QixDQUFDO0lBRUwsQ0FBQyxDQUFDO0VBQ0Y7QUFDRjtBQUFDIn0=","map":{"version":3,"names":["Model","Sequelize","_sequelize","users","init","sequelize","DataTypes","user_id","autoIncrement","type","INTEGER","allowNull","primaryKey","user_name","STRING","unique","user_email","user_password","user_handphone","tableName","schema","timestamps","indexes","name","fields"],"sourceRoot":"/Applications/nodejs/server/server/models/","sources":["users.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class users extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    user_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    user_name: {\n      type: DataTypes.STRING(20),\n      allowNull: true,\n      unique: \"user_name_uq\"\n    },\n    user_email: {\n      type: DataTypes.STRING(55),\n      allowNull: true,\n      unique: \"user_email_uq\"\n    },\n    user_password: {\n      type: DataTypes.STRING(255),\n      allowNull: true\n    },\n    user_handphone: {\n      type: DataTypes.STRING(15),\n      allowNull: true,\n      unique: \"user_handphone_uq\"\n    }\n  }, {\n    sequelize,\n    tableName: 'users',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"user_email_uq\",\n        unique: true,\n        fields: [\n          { name: \"user_email\" },\n        ]\n      },\n      {\n        name: \"user_handphone_uq\",\n        unique: true,\n        fields: [\n          { name: \"user_handphone\" },\n        ]\n      },\n      {\n        name: \"user_id_pk\",\n        unique: true,\n        fields: [\n          { name: \"user_id\" },\n        ]\n      },\n      {\n        name: \"user_name_uq\",\n        unique: true,\n        fields: [\n          { name: \"user_name\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,KAAK,SAASH,KAAK,CAAC;EACvC,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,SAAS,EAAE;QACTJ,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,IAAI;QACfI,MAAM,EAAE;MACV,CAAC;MACDC,UAAU,EAAE;QACVP,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,IAAI;QACfI,MAAM,EAAE;MACV,CAAC;MACDE,aAAa,EAAE;QACbR,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,GAAG,CAAC;QAC3BH,SAAS,EAAE;MACb,CAAC;MACDO,cAAc,EAAE;QACdT,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,IAAI;QACfI,MAAM,EAAE;MACV;IACF,CAAC,EAAE;MACDV,SAAS;MACTc,SAAS,EAAE,OAAO;MAClBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,eAAe;QACrBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAa,CAAC;MAE1B,CAAC,EACD;QACEA,IAAI,EAAE,mBAAmB;QACzBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAiB,CAAC;MAE9B,CAAC,EACD;QACEA,IAAI,EAAE,YAAY;QAClBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC,EACD;QACEA,IAAI,EAAE,cAAc;QACpBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAY,CAAC;MAEzB,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1676370401679},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/routes/IndexRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _UserRoute = _interopRequireDefault(require(\"./UserRoute\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  UserRoute: _UserRoute.default\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyUm91dGUiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvbm9kZWpzL3NlcnZlci9zZXJ2ZXIvcm91dGVzLyIsInNvdXJjZXMiOlsiSW5kZXhSb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlclJvdXRlIGZyb20gXCIuL1VzZXJSb3V0ZVwiXG5cbmV4cG9ydCBkZWZhdWx0e1xuICAgIFVzZXJSb3V0ZVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFBQSxlQUVyQjtFQUNWQSxTQUFTLEVBQVRBO0FBQ0osQ0FBQztBQUFBIn0=","map":{"version":3,"names":["UserRoute"],"sourceRoot":"/Applications/nodejs/server/server/routes/","sources":["IndexRoute.js"],"sourcesContent":["import UserRoute from \"./UserRoute\"\n\nexport default{\n    UserRoute\n}"],"mappings":";;;;;;AAAA;AAAmC;AAAA,eAErB;EACVA,SAAS,EAATA;AACJ,CAAC;AAAA"}},"mtime":1676366618058},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/routes/UserRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _authJWT = _interopRequireDefault(require(\"../helpers/authJWT\"));\nvar _IndexController = _interopRequireDefault(require(\"../controller/IndexController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst router = (0, _express.Router)();\nrouter.post(\"/signin\", _authJWT.default.authenticate, _authJWT.default.login);\nrouter.post(\"/signup\", _IndexController.default.UserController.signup);\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiYXV0aEpXVCIsImF1dGhlbnRpY2F0ZSIsImxvZ2luIiwiSW5kZXhDb250cm9sbGVyIiwiVXNlckNvbnRyb2xsZXIiLCJzaWdudXAiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvbm9kZWpzL3NlcnZlci9zZXJ2ZXIvcm91dGVzLyIsInNvdXJjZXMiOlsiVXNlclJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgYXV0aEpXVCBmcm9tIFwiLi4vaGVscGVycy9hdXRoSldUXCI7XG5pbXBvcnQgSW5kZXhDb250cm9sbGVyIGZyb20gXCIuLi9jb250cm9sbGVyL0luZGV4Q29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLnBvc3QoXCIvc2lnbmluXCIsYXV0aEpXVC5hdXRoZW50aWNhdGUsYXV0aEpXVC5sb2dpbik7XG5yb3V0ZXIucG9zdChcIi9zaWdudXBcIixJbmRleENvbnRyb2xsZXIuVXNlckNvbnRyb2xsZXIuc2lnbnVwKTtcbi8vcm91dGVyLnBvc3QoXCIvcmVmcmVzaHRva2VuXCIsYXV0aEpXVC5yZWZyZXNoVG9rZW4pXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUE0RDtBQUU1RCxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsZUFBTSxHQUFFO0FBRXZCRCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUNDLGdCQUFPLENBQUNDLFlBQVksRUFBQ0QsZ0JBQU8sQ0FBQ0UsS0FBSyxDQUFDO0FBQ3pETCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUNJLHdCQUFlLENBQUNDLGNBQWMsQ0FBQ0MsTUFBTSxDQUFDO0FBQzVEO0FBQUEsZUFFZVIsTUFBTTtBQUFBIn0=","map":{"version":3,"names":["router","Router","post","authJWT","authenticate","login","IndexController","UserController","signup"],"sourceRoot":"/Applications/nodejs/server/server/routes/","sources":["UserRoute.js"],"sourcesContent":["import { Router } from \"express\";\nimport authJWT from \"../helpers/authJWT\";\nimport IndexController from \"../controller/IndexController\";\n\nconst router = Router();\n\nrouter.post(\"/signin\",authJWT.authenticate,authJWT.login);\nrouter.post(\"/signup\",IndexController.UserController.signup);\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\n\nexport default router;"],"mappings":";;;;;;AAAA;AACA;AACA;AAA4D;AAE5D,MAAMA,MAAM,GAAG,IAAAC,eAAM,GAAE;AAEvBD,MAAM,CAACE,IAAI,CAAC,SAAS,EAACC,gBAAO,CAACC,YAAY,EAACD,gBAAO,CAACE,KAAK,CAAC;AACzDL,MAAM,CAACE,IAAI,CAAC,SAAS,EAACI,wBAAe,CAACC,cAAc,CAACC,MAAM,CAAC;AAC5D;AAAA,eAEeR,MAAM;AAAA"}},"mtime":1676366768768},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/helpers/authJWT.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _initModels = _interopRequireDefault(require(\"../models/init-models\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst jwt = require('jsonwebtoken');\nconst passport = require('passport');\nconst Strategy = require('passport-local').Strategy;\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt';\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret';\nconst jwtOpts = {\n  algorithm: 'HS256',\n  expiresIn: '30d'\n};\n//passport.use(adminStrategy())\n\npassport.use(new Strategy({\n  usernameField: 'username',\n  passwordField: 'password'\n}, async function (username, password, cb) {\n  try {\n    const result = await _initModels.default.users.findOne({\n      include: [{\n        include: [{\n          model: _initModels.default.roles\n        }],\n        model: _initModels.default.user_roles\n      }],\n      where: {\n        user_name: username\n      }\n    });\n    const {\n      user_name,\n      user_id,\n      user_password,\n      user_email,\n      user_roles: [{\n        role: {\n          role_name\n        }\n      }]\n    } = result.dataValues;\n    const compare = await _bcrypt.default.compare(password, user_password);\n    if (compare) return cb(null, {\n      username: user_name,\n      userId: user_id,\n      email: user_email,\n      userRoles: role_name\n    });\n  } catch (error) {\n    return cb(null, error.message);\n  }\n  cb(null, false);\n}));\nconst authenticate = passport.authenticate('local', {\n  session: false\n});\nmodule.exports = {\n  authenticate,\n  login: login,\n  ensureAdmin: ensureAdmin,\n  ensureSeller: ensureSeller,\n  refreshToken: refreshToken\n};\nasync function login(req, res, next) {\n  console.log(1234567890, req.user);\n  const token = await sign({\n    username: req.user.username,\n    roleType: req.user.userRoles\n  });\n  const {\n    userId,\n    username,\n    email,\n    userRoles\n  } = req.user;\n  console.log(req.user);\n  res.cookie('jwt', token, {\n    httpOnly: true\n  });\n  res.json({\n    profile: {\n      userId,\n      username,\n      email,\n      userRoles\n    },\n    success: true,\n    token: token\n  });\n}\nasync function sign(payload) {\n  const token = await jwt.sign(payload, jwtSecret, jwtOpts);\n  return token;\n}\nasync function ensureSeller(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username) {\n    req.user = payload;\n    if (req.user.roleType === 'Seller') req.isSeller = true;\n    return next();\n  }\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function ensureAdmin(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username === 'admin') return next();\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function verify(jwtString = '') {\n  jwtString = jwtString.replace(/^Bearer /i, '');\n  try {\n    const payload = await jwt.verify(jwtString, jwtSecret);\n    return payload;\n  } catch (err) {\n    err.statusCode = 401;\n    throw err;\n  }\n}\nasync function refreshToken(req, res) {\n  const {\n    refreshToken: requestToken\n  } = req.body;\n  if (requestToken == null) {\n    return res.status(403).json({\n      message: \"Refresh Token is required!\"\n    });\n  }\n  try {\n    const result = await _initModels.default.tokens.findOne({\n      where: {\n        token_id: refreshToken\n      }\n    });\n    if (!refreshToken) {\n      res.status(403).json({\n        message: \"Refresh token is not in database!\"\n      });\n      return;\n    }\n    if (result.token_expire_date.getTime() < new Date().getTime()) {\n      res.status(403).json({\n        message: \"Refresh token was expired. Please make a new signin request\"\n      });\n      return;\n    }\n    let newAccessToken = jwt.sign({\n      id: user.id\n    }, config.secret, {\n      expiresIn: config.jwtExpiration\n    });\n    return res.status(200).json({\n      accessToken: newAccessToken,\n      refreshToken: refreshToken.token\n    });\n  } catch (error) {\n    return res.status(500).send({\n      message: error\n    });\n  }\n}\n\n// function adminStrategy() {\n\n//     return new Strategy(async function (username, password, cb) {\n//         try {\n//             const result = await models.users.findOne({\n//                 where: { user_email: username }\n//             });\n\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\n//             const compare = await bcrypt.compare(password, user_password);\n\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\n//         } catch (error) {\n//             //console.log(error);\n//             return cb(null, error)\n//         }\n\n//         cb(null, false)\n//     })\n// }\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwicGFzc3BvcnQiLCJTdHJhdGVneSIsImp3dFNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiYWRtaW5QYXNzd29yZCIsIkFETUlOX1BBU1NXT1JEIiwiand0T3B0cyIsImFsZ29yaXRobSIsImV4cGlyZXNJbiIsInVzZSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImNiIiwicmVzdWx0IiwibW9kZWxzIiwidXNlcnMiLCJmaW5kT25lIiwiaW5jbHVkZSIsIm1vZGVsIiwicm9sZXMiLCJ1c2VyX3JvbGVzIiwid2hlcmUiLCJ1c2VyX25hbWUiLCJ1c2VyX2lkIiwidXNlcl9wYXNzd29yZCIsInVzZXJfZW1haWwiLCJyb2xlIiwicm9sZV9uYW1lIiwiZGF0YVZhbHVlcyIsImNvbXBhcmUiLCJiY3J5cHQiLCJ1c2VySWQiLCJlbWFpbCIsInVzZXJSb2xlcyIsImVycm9yIiwibWVzc2FnZSIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJtb2R1bGUiLCJleHBvcnRzIiwibG9naW4iLCJlbnN1cmVBZG1pbiIsImVuc3VyZVNlbGxlciIsInJlZnJlc2hUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwidXNlciIsInRva2VuIiwic2lnbiIsInJvbGVUeXBlIiwiY29va2llIiwiaHR0cE9ubHkiLCJqc29uIiwicHJvZmlsZSIsInN1Y2Nlc3MiLCJwYXlsb2FkIiwiand0U3RyaW5nIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJjb29raWVzIiwidmVyaWZ5IiwiaXNTZWxsZXIiLCJlcnIiLCJFcnJvciIsInN0YXR1c0NvZGUiLCJyZXBsYWNlIiwicmVxdWVzdFRva2VuIiwiYm9keSIsInN0YXR1cyIsInRva2VucyIsInRva2VuX2lkIiwidG9rZW5fZXhwaXJlX2RhdGUiLCJnZXRUaW1lIiwiRGF0ZSIsIm5ld0FjY2Vzc1Rva2VuIiwiaWQiLCJjb25maWciLCJzZWNyZXQiLCJqd3RFeHBpcmF0aW9uIiwiYWNjZXNzVG9rZW4iLCJzZW5kIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL2hlbHBlcnMvIiwic291cmNlcyI6WyJhdXRoSldULmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXG5jb25zdCBwYXNzcG9ydCA9IHJlcXVpcmUoJ3Bhc3Nwb3J0JylcbmNvbnN0IFN0cmF0ZWd5ID0gcmVxdWlyZSgncGFzc3BvcnQtbG9jYWwnKS5TdHJhdGVneVxuXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5cbmNvbnN0IGp3dFNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ215and0J1xuY29uc3QgYWRtaW5QYXNzd29yZCA9IHByb2Nlc3MuZW52LkFETUlOX1BBU1NXT1JEIHx8ICdzZWNyZXQnXG5jb25zdCBqd3RPcHRzID0geyBhbGdvcml0aG06ICdIUzI1NicsIGV4cGlyZXNJbjogJzMwZCcgfVxuaW1wb3J0IG1vZGVscyBmcm9tICcuLi9tb2RlbHMvaW5pdC1tb2RlbHMnXG5cbi8vcGFzc3BvcnQudXNlKGFkbWluU3RyYXRlZ3koKSlcblxucGFzc3BvcnQudXNlKG5ldyBTdHJhdGVneSh7XG4gICAgdXNlcm5hbWVGaWVsZDogJ3VzZXJuYW1lJyxcbiAgICBwYXNzd29yZEZpZWxkOiAncGFzc3dvcmQnXG59LFxuICAgIGFzeW5jIGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQsIGNiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2RlbHMudXNlcnMuZmluZE9uZSh7XG4gICAgICAgICAgICAgIGluY2x1ZGU6W3tpbmNsdWRlOlt7bW9kZWw6bW9kZWxzLnJvbGVzfV0sIG1vZGVsOm1vZGVscy51c2VyX3JvbGVzfV0sICB3aGVyZTogeyB1c2VyX25hbWU6IHVzZXJuYW1lIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB7IHVzZXJfbmFtZSwgdXNlcl9pZCwgdXNlcl9wYXNzd29yZCwgdXNlcl9lbWFpbCx1c2VyX3JvbGVzOlt7cm9sZTp7cm9sZV9uYW1lfX1dfSA9IHJlc3VsdC5kYXRhVmFsdWVzO1xuICAgICAgICAgICAgY29uc3QgY29tcGFyZSA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyX3Bhc3N3b3JkKTtcblxuICAgICAgICAgICAgaWYgKGNvbXBhcmUpIHJldHVybiBjYihudWxsLCB7IHVzZXJuYW1lOiB1c2VyX25hbWUsIHVzZXJJZDogdXNlcl9pZCwgZW1haWw6IHVzZXJfZW1haWwsIHVzZXJSb2xlczogcm9sZV9uYW1lfSlcblxuXG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBjYihudWxsLCBlcnJvci5tZXNzYWdlKVxuICAgICAgICB9XG5cbiAgICAgICAgY2IobnVsbCwgZmFsc2UpXG4gICAgfVxuKSlcblxuY29uc3QgYXV0aGVudGljYXRlID0gcGFzc3BvcnQuYXV0aGVudGljYXRlKCdsb2NhbCcsIHsgc2Vzc2lvbjogZmFsc2UgfSlcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgYXV0aGVudGljYXRlLFxuICAgIGxvZ2luOiBsb2dpbixcbiAgICBlbnN1cmVBZG1pbjogZW5zdXJlQWRtaW4sXG4gICAgZW5zdXJlU2VsbGVyOiBlbnN1cmVTZWxsZXIsXG4gICAgcmVmcmVzaFRva2VuIDogcmVmcmVzaFRva2VuXG59XG5cblxuXG5hc3luYyBmdW5jdGlvbiBsb2dpbihyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnNvbGUubG9nKDEyMzQ1Njc4OTAsIHJlcS51c2VyKTtcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHNpZ24oeyB1c2VybmFtZTogcmVxLnVzZXIudXNlcm5hbWUsIHJvbGVUeXBlOiByZXEudXNlci51c2VyUm9sZXMgfSk7XG4gICAgY29uc3QgeyB1c2VySWQsIHVzZXJuYW1lLCBlbWFpbCwgdXNlclJvbGVzIH0gPSByZXEudXNlcjtcbiAgICBjb25zb2xlLmxvZyhyZXEudXNlcik7XG4gICAgcmVzLmNvb2tpZSgnand0JywgdG9rZW4sIHsgaHR0cE9ubHk6IHRydWUgfSlcblxuICAgIHJlcy5qc29uKHsgcHJvZmlsZTogeyB1c2VySWQsIHVzZXJuYW1lLCBlbWFpbCwgdXNlclJvbGVzIH0sIHN1Y2Nlc3M6IHRydWUsIHRva2VuOiB0b2tlbiB9KVxufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIHNpZ24ocGF5bG9hZCkge1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgand0LnNpZ24ocGF5bG9hZCwgand0U2VjcmV0LCBqd3RPcHRzKVxuICAgIHJldHVybiB0b2tlblxufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVTZWxsZXIocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBqd3RTdHJpbmcgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uIHx8IHJlcS5jb29raWVzLmp3dFxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnkoand0U3RyaW5nKVxuICAgIGlmIChwYXlsb2FkLnVzZXJuYW1lKSB7XG4gICAgICAgIHJlcS51c2VyID0gcGF5bG9hZDtcbiAgICAgICAgaWYgKHJlcS51c2VyLnJvbGVUeXBlID09PSAnU2VsbGVyJykgcmVxLmlzU2VsbGVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxO1xuICAgIG5leHQoZXJyKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlQWRtaW4ocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBqd3RTdHJpbmcgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uIHx8IHJlcS5jb29raWVzLmp3dFxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnkoand0U3RyaW5nKVxuICAgIGlmIChwYXlsb2FkLnVzZXJuYW1lID09PSAnYWRtaW4nKSByZXR1cm4gbmV4dCgpXG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKVxuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxXG4gICAgbmV4dChlcnIpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeShqd3RTdHJpbmcgPSAnJykge1xuICAgIGp3dFN0cmluZyA9IGp3dFN0cmluZy5yZXBsYWNlKC9eQmVhcmVyIC9pLCAnJylcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgand0LnZlcmlmeShqd3RTdHJpbmcsIGp3dFNlY3JldClcbiAgICAgICAgcmV0dXJuIHBheWxvYWRcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLnN0YXR1c0NvZGUgPSA0MDFcbiAgICAgICAgdGhyb3cgZXJyXG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiByZWZyZXNoVG9rZW4ocmVxLCByZXMpIHtcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbjogcmVxdWVzdFRva2VuIH0gPSByZXEuYm9keTtcblxuICAgIGlmIChyZXF1ZXN0VG9rZW4gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIlJlZnJlc2ggVG9rZW4gaXMgcmVxdWlyZWQhXCIgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWxzLnRva2Vucy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHRva2VuX2lkOiByZWZyZXNoVG9rZW4gfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIlJlZnJlc2ggdG9rZW4gaXMgbm90IGluIGRhdGFiYXNlIVwiIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdC50b2tlbl9leHBpcmVfZGF0ZS5nZXRUaW1lKCkgPCBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVmcmVzaCB0b2tlbiB3YXMgZXhwaXJlZC4gUGxlYXNlIG1ha2UgYSBuZXcgc2lnbmluIHJlcXVlc3RcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5ld0FjY2Vzc1Rva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5pZCB9LCBjb25maWcuc2VjcmV0LCB7XG4gICAgICAgICAgICBleHBpcmVzSW46IGNvbmZpZy5qd3RFeHBpcmF0aW9uLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogbmV3QWNjZXNzVG9rZW4sXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbi50b2tlbixcbiAgICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnJvciB9KTtcbiAgICB9XG5cblxufVxuXG4vLyBmdW5jdGlvbiBhZG1pblN0cmF0ZWd5KCkge1xuXG4vLyAgICAgcmV0dXJuIG5ldyBTdHJhdGVneShhc3luYyBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBjYikge1xuLy8gICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWxzLnVzZXJzLmZpbmRPbmUoe1xuLy8gICAgICAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJfZW1haWw6IHVzZXJuYW1lIH1cbi8vICAgICAgICAgICAgIH0pO1xuXG4vLyAgICAgICAgICAgICBjb25zdCB7IHVzZXJfbmFtZSwgdXNlcl9pZCwgdXNlcl9wYXNzd29yZCwgdXNlcl9lbWFpbCwgdXNlcl9yb2xlX3R5cGUgfSA9IHJlc3VsdC5kYXRhVmFsdWVzO1xuLy8gICAgICAgICAgICAgY29uc3QgY29tcGFyZSA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyX3Bhc3N3b3JkKTtcblxuLy8gICAgICAgICAgICAgaWYgKGNvbXBhcmUpIHJldHVybiBjYihudWxsLCB7IHVzZXJuYW1lOiB1c2VyX25hbWUsIHVzZXJJZDogdXNlcl9pZCwgZW1haWw6IHVzZXJfZW1haWwsIHJvbGVUeXBlOiB1c2VyX3JvbGVfdHlwZSB9KVxuLy8gICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlcnJvcik7XG4vLyAgICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgZXJyb3IpXG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICBjYihudWxsLCBmYWxzZSlcbi8vICAgICB9KVxuLy8gfSJdLCJtYXBwaW5ncyI6Ijs7QUFJQTtBQUtBO0FBQTBDO0FBVDFDLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTUUsUUFBUSxHQUFHRixPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQ0UsUUFBUTtBQUluRCxNQUFNQyxTQUFTLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLElBQUksT0FBTztBQUNuRCxNQUFNQyxhQUFhLEdBQUdILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxjQUFjLElBQUksUUFBUTtBQUM1RCxNQUFNQyxPQUFPLEdBQUc7RUFBRUMsU0FBUyxFQUFFLE9BQU87RUFBRUMsU0FBUyxFQUFFO0FBQU0sQ0FBQztBQUd4RDs7QUFFQVYsUUFBUSxDQUFDVyxHQUFHLENBQUMsSUFBSVYsUUFBUSxDQUFDO0VBQ3RCVyxhQUFhLEVBQUUsVUFBVTtFQUN6QkMsYUFBYSxFQUFFO0FBQ25CLENBQUMsRUFDRyxnQkFBZ0JDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxFQUFFLEVBQUU7RUFDcEMsSUFBSTtJQUNBLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxtQkFBTSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQztNQUN4Q0MsT0FBTyxFQUFDLENBQUM7UUFBQ0EsT0FBTyxFQUFDLENBQUM7VUFBQ0MsS0FBSyxFQUFDSixtQkFBTSxDQUFDSztRQUFLLENBQUMsQ0FBQztRQUFFRCxLQUFLLEVBQUNKLG1CQUFNLENBQUNNO01BQVUsQ0FBQyxDQUFDO01BQUdDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUVaO01BQVM7SUFDckcsQ0FBQyxDQUFDO0lBRUYsTUFBTTtNQUFFWSxTQUFTO01BQUVDLE9BQU87TUFBRUMsYUFBYTtNQUFFQyxVQUFVO01BQUNMLFVBQVUsRUFBQyxDQUFDO1FBQUNNLElBQUksRUFBQztVQUFDQztRQUFTO01BQUMsQ0FBQztJQUFDLENBQUMsR0FBR2QsTUFBTSxDQUFDZSxVQUFVO0lBQzFHLE1BQU1DLE9BQU8sR0FBRyxNQUFNQyxlQUFNLENBQUNELE9BQU8sQ0FBQ2xCLFFBQVEsRUFBRWEsYUFBYSxDQUFDO0lBRTdELElBQUlLLE9BQU8sRUFBRSxPQUFPakIsRUFBRSxDQUFDLElBQUksRUFBRTtNQUFFRixRQUFRLEVBQUVZLFNBQVM7TUFBRVMsTUFBTSxFQUFFUixPQUFPO01BQUVTLEtBQUssRUFBRVAsVUFBVTtNQUFFUSxTQUFTLEVBQUVOO0lBQVMsQ0FBQyxDQUFDO0VBSWxILENBQUMsQ0FBQyxPQUFPTyxLQUFLLEVBQUU7SUFDWixPQUFPdEIsRUFBRSxDQUFDLElBQUksRUFBRXNCLEtBQUssQ0FBQ0MsT0FBTyxDQUFDO0VBQ2xDO0VBRUF2QixFQUFFLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQztBQUNuQixDQUFDLENBQ0osQ0FBQztBQUVGLE1BQU13QixZQUFZLEdBQUd4QyxRQUFRLENBQUN3QyxZQUFZLENBQUMsT0FBTyxFQUFFO0VBQUVDLE9BQU8sRUFBRTtBQUFNLENBQUMsQ0FBQztBQUV2RUMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYkgsWUFBWTtFQUNaSSxLQUFLLEVBQUVBLEtBQUs7RUFDWkMsV0FBVyxFQUFFQSxXQUFXO0VBQ3hCQyxZQUFZLEVBQUVBLFlBQVk7RUFDMUJDLFlBQVksRUFBR0E7QUFDbkIsQ0FBQztBQUlELGVBQWVILEtBQUssQ0FBQ0ksR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUNqQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsVUFBVSxFQUFFSixHQUFHLENBQUNLLElBQUksQ0FBQztFQUNqQyxNQUFNQyxLQUFLLEdBQUcsTUFBTUMsSUFBSSxDQUFDO0lBQUV6QyxRQUFRLEVBQUVrQyxHQUFHLENBQUNLLElBQUksQ0FBQ3ZDLFFBQVE7SUFBRTBDLFFBQVEsRUFBRVIsR0FBRyxDQUFDSyxJQUFJLENBQUNoQjtFQUFVLENBQUMsQ0FBQztFQUN2RixNQUFNO0lBQUVGLE1BQU07SUFBRXJCLFFBQVE7SUFBRXNCLEtBQUs7SUFBRUM7RUFBVSxDQUFDLEdBQUdXLEdBQUcsQ0FBQ0ssSUFBSTtFQUN2REYsT0FBTyxDQUFDQyxHQUFHLENBQUNKLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0VBQ3JCSixHQUFHLENBQUNRLE1BQU0sQ0FBQyxLQUFLLEVBQUVILEtBQUssRUFBRTtJQUFFSSxRQUFRLEVBQUU7RUFBSyxDQUFDLENBQUM7RUFFNUNULEdBQUcsQ0FBQ1UsSUFBSSxDQUFDO0lBQUVDLE9BQU8sRUFBRTtNQUFFekIsTUFBTTtNQUFFckIsUUFBUTtNQUFFc0IsS0FBSztNQUFFQztJQUFVLENBQUM7SUFBRXdCLE9BQU8sRUFBRSxJQUFJO0lBQUVQLEtBQUssRUFBRUE7RUFBTSxDQUFDLENBQUM7QUFDOUY7QUFHQSxlQUFlQyxJQUFJLENBQUNPLE9BQU8sRUFBRTtFQUN6QixNQUFNUixLQUFLLEdBQUcsTUFBTXhELEdBQUcsQ0FBQ3lELElBQUksQ0FBQ08sT0FBTyxFQUFFNUQsU0FBUyxFQUFFTSxPQUFPLENBQUM7RUFDekQsT0FBTzhDLEtBQUs7QUFDaEI7QUFFQSxlQUFlUixZQUFZLENBQUNFLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7RUFDeEMsTUFBTWEsU0FBUyxHQUFHZixHQUFHLENBQUNnQixPQUFPLENBQUNDLGFBQWEsSUFBSWpCLEdBQUcsQ0FBQ2tCLE9BQU8sQ0FBQ3BFLEdBQUc7RUFDOUQsTUFBTWdFLE9BQU8sR0FBRyxNQUFNSyxNQUFNLENBQUNKLFNBQVMsQ0FBQztFQUN2QyxJQUFJRCxPQUFPLENBQUNoRCxRQUFRLEVBQUU7SUFDbEJrQyxHQUFHLENBQUNLLElBQUksR0FBR1MsT0FBTztJQUNsQixJQUFJZCxHQUFHLENBQUNLLElBQUksQ0FBQ0csUUFBUSxLQUFLLFFBQVEsRUFBRVIsR0FBRyxDQUFDb0IsUUFBUSxHQUFHLElBQUk7SUFDdkQsT0FBT2xCLElBQUksRUFBRTtFQUNqQjtFQUVBLE1BQU1tQixHQUFHLEdBQUcsSUFBSUMsS0FBSyxDQUFDLGNBQWMsQ0FBQztFQUNyQ0QsR0FBRyxDQUFDRSxVQUFVLEdBQUcsR0FBRztFQUNwQnJCLElBQUksQ0FBQ21CLEdBQUcsQ0FBQztBQUNiO0FBRUEsZUFBZXhCLFdBQVcsQ0FBQ0csR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUN2QyxNQUFNYSxTQUFTLEdBQUdmLEdBQUcsQ0FBQ2dCLE9BQU8sQ0FBQ0MsYUFBYSxJQUFJakIsR0FBRyxDQUFDa0IsT0FBTyxDQUFDcEUsR0FBRztFQUM5RCxNQUFNZ0UsT0FBTyxHQUFHLE1BQU1LLE1BQU0sQ0FBQ0osU0FBUyxDQUFDO0VBQ3ZDLElBQUlELE9BQU8sQ0FBQ2hELFFBQVEsS0FBSyxPQUFPLEVBQUUsT0FBT29DLElBQUksRUFBRTtFQUMvQyxNQUFNbUIsR0FBRyxHQUFHLElBQUlDLEtBQUssQ0FBQyxjQUFjLENBQUM7RUFDckNELEdBQUcsQ0FBQ0UsVUFBVSxHQUFHLEdBQUc7RUFDcEJyQixJQUFJLENBQUNtQixHQUFHLENBQUM7QUFDYjtBQUVBLGVBQWVGLE1BQU0sQ0FBQ0osU0FBUyxHQUFHLEVBQUUsRUFBRTtFQUNsQ0EsU0FBUyxHQUFHQSxTQUFTLENBQUNTLE9BQU8sQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDO0VBQzlDLElBQUk7SUFDQSxNQUFNVixPQUFPLEdBQUcsTUFBTWhFLEdBQUcsQ0FBQ3FFLE1BQU0sQ0FBQ0osU0FBUyxFQUFFN0QsU0FBUyxDQUFDO0lBQ3RELE9BQU80RCxPQUFPO0VBQ2xCLENBQUMsQ0FBQyxPQUFPTyxHQUFHLEVBQUU7SUFDVkEsR0FBRyxDQUFDRSxVQUFVLEdBQUcsR0FBRztJQUNwQixNQUFNRixHQUFHO0VBQ2I7QUFDSjtBQUVBLGVBQWV0QixZQUFZLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0VBQ2xDLE1BQU07SUFBRUYsWUFBWSxFQUFFMEI7RUFBYSxDQUFDLEdBQUd6QixHQUFHLENBQUMwQixJQUFJO0VBRS9DLElBQUlELFlBQVksSUFBSSxJQUFJLEVBQUU7SUFDdEIsT0FBT3hCLEdBQUcsQ0FBQzBCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2hCLElBQUksQ0FBQztNQUFFcEIsT0FBTyxFQUFFO0lBQTZCLENBQUMsQ0FBQztFQUMxRTtFQUVBLElBQUk7SUFDQSxNQUFNdEIsTUFBTSxHQUFHLE1BQU1DLG1CQUFNLENBQUMwRCxNQUFNLENBQUN4RCxPQUFPLENBQUM7TUFDdkNLLEtBQUssRUFBRTtRQUFFb0QsUUFBUSxFQUFFOUI7TUFBYTtJQUNwQyxDQUFDLENBQUM7SUFFRixJQUFJLENBQUNBLFlBQVksRUFBRTtNQUNmRSxHQUFHLENBQUMwQixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNoQixJQUFJLENBQUM7UUFBRXBCLE9BQU8sRUFBRTtNQUFvQyxDQUFDLENBQUM7TUFDdEU7SUFDSjtJQUVBLElBQUl0QixNQUFNLENBQUM2RCxpQkFBaUIsQ0FBQ0MsT0FBTyxFQUFFLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUNELE9BQU8sRUFBRSxFQUFFO01BQzNEOUIsR0FBRyxDQUFDMEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDaEIsSUFBSSxDQUFDO1FBQ2pCcEIsT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO01BQ0Y7SUFDSjtJQUVBLElBQUkwQyxjQUFjLEdBQUduRixHQUFHLENBQUN5RCxJQUFJLENBQUM7TUFBRTJCLEVBQUUsRUFBRTdCLElBQUksQ0FBQzZCO0lBQUcsQ0FBQyxFQUFFQyxNQUFNLENBQUNDLE1BQU0sRUFBRTtNQUMxRDFFLFNBQVMsRUFBRXlFLE1BQU0sQ0FBQ0U7SUFDcEIsQ0FBQyxDQUFDO0lBRUosT0FBT3BDLEdBQUcsQ0FBQzBCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2hCLElBQUksQ0FBQztNQUN4QjJCLFdBQVcsRUFBRUwsY0FBYztNQUMzQmxDLFlBQVksRUFBRUEsWUFBWSxDQUFDTztJQUMvQixDQUFDLENBQUM7RUFFTixDQUFDLENBQUMsT0FBT2hCLEtBQUssRUFBRTtJQUNaLE9BQU9XLEdBQUcsQ0FBQzBCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ1ksSUFBSSxDQUFDO01BQUVoRCxPQUFPLEVBQUVEO0lBQU0sQ0FBQyxDQUFDO0VBQ25EO0FBR0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIn0=","map":{"version":3,"names":["jwt","require","passport","Strategy","jwtSecret","process","env","JWT_SECRET","adminPassword","ADMIN_PASSWORD","jwtOpts","algorithm","expiresIn","use","usernameField","passwordField","username","password","cb","result","models","users","findOne","include","model","roles","user_roles","where","user_name","user_id","user_password","user_email","role","role_name","dataValues","compare","bcrypt","userId","email","userRoles","error","message","authenticate","session","module","exports","login","ensureAdmin","ensureSeller","refreshToken","req","res","next","console","log","user","token","sign","roleType","cookie","httpOnly","json","profile","success","payload","jwtString","headers","authorization","cookies","verify","isSeller","err","Error","statusCode","replace","requestToken","body","status","tokens","token_id","token_expire_date","getTime","Date","newAccessToken","id","config","secret","jwtExpiration","accessToken","send"],"sourceRoot":"/Applications/nodejs/server/server/helpers/","sources":["authJWT.js"],"sourcesContent":["const jwt = require('jsonwebtoken')\nconst passport = require('passport')\nconst Strategy = require('passport-local').Strategy\n\nimport bcrypt from 'bcrypt';\n\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt'\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret'\nconst jwtOpts = { algorithm: 'HS256', expiresIn: '30d' }\nimport models from '../models/init-models'\n\n//passport.use(adminStrategy())\n\npassport.use(new Strategy({\n    usernameField: 'username',\n    passwordField: 'password'\n},\n    async function (username, password, cb) {\n        try {\n            const result = await models.users.findOne({\n              include:[{include:[{model:models.roles}], model:models.user_roles}],  where: { user_name: username }\n            });\n            \n            const { user_name, user_id, user_password, user_email,user_roles:[{role:{role_name}}]} = result.dataValues;\n            const compare = await bcrypt.compare(password, user_password);\n\n            if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, userRoles: role_name})\n\n\n\n        } catch (error) {\n            return cb(null, error.message)\n        }\n\n        cb(null, false)\n    }\n))\n\nconst authenticate = passport.authenticate('local', { session: false })\n\nmodule.exports = {\n    authenticate,\n    login: login,\n    ensureAdmin: ensureAdmin,\n    ensureSeller: ensureSeller,\n    refreshToken : refreshToken\n}\n\n\n\nasync function login(req, res, next) {\n    console.log(1234567890, req.user);\n    const token = await sign({ username: req.user.username, roleType: req.user.userRoles });\n    const { userId, username, email, userRoles } = req.user;\n    console.log(req.user);\n    res.cookie('jwt', token, { httpOnly: true })\n\n    res.json({ profile: { userId, username, email, userRoles }, success: true, token: token })\n}\n\n\nasync function sign(payload) {\n    const token = await jwt.sign(payload, jwtSecret, jwtOpts)\n    return token\n}\n\nasync function ensureSeller(req, res, next) {\n    const jwtString = req.headers.authorization || req.cookies.jwt\n    const payload = await verify(jwtString)\n    if (payload.username) {\n        req.user = payload;\n        if (req.user.roleType === 'Seller') req.isSeller = true;\n        return next();\n    }\n\n    const err = new Error('Unauthorized');\n    err.statusCode = 401;\n    next(err);\n}\n\nasync function ensureAdmin(req, res, next) {\n    const jwtString = req.headers.authorization || req.cookies.jwt\n    const payload = await verify(jwtString)\n    if (payload.username === 'admin') return next()\n    const err = new Error('Unauthorized')\n    err.statusCode = 401\n    next(err)\n}\n\nasync function verify(jwtString = '') {\n    jwtString = jwtString.replace(/^Bearer /i, '')\n    try {\n        const payload = await jwt.verify(jwtString, jwtSecret)\n        return payload\n    } catch (err) {\n        err.statusCode = 401\n        throw err\n    }\n}\n\nasync function refreshToken(req, res) {\n    const { refreshToken: requestToken } = req.body;\n\n    if (requestToken == null) {\n        return res.status(403).json({ message: \"Refresh Token is required!\" });\n    }\n\n    try {\n        const result = await models.tokens.findOne({\n            where: { token_id: refreshToken }\n        });\n\n        if (!refreshToken) {\n            res.status(403).json({ message: \"Refresh token is not in database!\" });\n            return;\n        }\n\n        if (result.token_expire_date.getTime() < new Date().getTime()) {\n            res.status(403).json({\n                message: \"Refresh token was expired. Please make a new signin request\",\n            });\n            return;\n        }\n\n        let newAccessToken = jwt.sign({ id: user.id }, config.secret, {\n            expiresIn: config.jwtExpiration,\n          });\n\n        return res.status(200).json({\n            accessToken: newAccessToken,\n            refreshToken: refreshToken.token,\n        });\n\n    } catch (error) {\n        return res.status(500).send({ message: error });\n    }\n\n\n}\n\n// function adminStrategy() {\n\n//     return new Strategy(async function (username, password, cb) {\n//         try {\n//             const result = await models.users.findOne({\n//                 where: { user_email: username }\n//             });\n\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\n//             const compare = await bcrypt.compare(password, user_password);\n\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\n//         } catch (error) {\n//             //console.log(error);\n//             return cb(null, error)\n//         }\n\n//         cb(null, false)\n//     })\n// }"],"mappings":"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"}},"mtime":1676371133267},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/controller/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/controller/IndexController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _UserController = _interopRequireDefault(require(\"./UserController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  UserController: _UserController.default\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyQ29udHJvbGxlciJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9ub2RlanMvc2VydmVyL3NlcnZlci9jb250cm9sbGVyLyIsInNvdXJjZXMiOlsiSW5kZXhDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2VyQ29udHJvbGxlciBmcm9tICcuL1VzZXJDb250cm9sbGVyJ1xuXG5leHBvcnQgZGVmYXVsdHtcbiAgICBVc2VyQ29udHJvbGxlclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBNkM7QUFBQSxlQUUvQjtFQUNWQSxjQUFjLEVBQWRBO0FBQ0osQ0FBQztBQUFBIn0=","map":{"version":3,"names":["UserController"],"sourceRoot":"/Applications/nodejs/server/server/controller/","sources":["IndexController.js"],"sourcesContent":["import UserController from './UserController'\n\nexport default{\n    UserController\n}"],"mappings":";;;;;;AAAA;AAA6C;AAAA,eAE/B;EACVA,cAAc,EAAdA;AACJ,CAAC;AAAA"}},"mtime":1676366746128},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/controller/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/controller/UserController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst SALT_ROUND = 10;\nconst signup = async (req, res) => {\n  const {\n    username,\n    email,\n    password\n  } = req.body;\n  let hashPassword = password;\n  hashPassword = await _bcrypt.default.hash(hashPassword, SALT_ROUND);\n  try {\n    const result = await req.context.models.users.create({\n      user_name: username,\n      user_email: email,\n      user_password: hashPassword,\n      user_roles: {\n        usro_role_id: 5\n      }\n    });\n    const {\n      user_name,\n      user_email\n    } = result.dataValues;\n    res.send({\n      user_name,\n      user_email\n    });\n  } catch (error) {\n    res.status(404).json(error.message);\n  }\n};\n\n// use sigin with token in authJWT\nconst signin = async (req, res) => {\n  const {\n    username,\n    password\n  } = req.body;\n  try {\n    const result = await req.context.models.users.findOne({\n      where: {\n        user_name: username\n      }\n    });\n    const {\n      user_name,\n      user_email,\n      user_password\n    } = result.dataValues;\n    const compare = await _bcrypt.default.compare(password, user_password);\n    if (compare) {\n      return res.send({\n        user_name,\n        user_email\n      });\n    } else {\n      return res.sendStatus(404);\n    }\n  } catch (error) {\n    return res.sendStatus(404);\n  }\n};\nvar _default = {\n  signup,\n  signin\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTQUxUX1JPVU5EIiwic2lnbnVwIiwicmVxIiwicmVzIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiYm9keSIsImhhc2hQYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJyZXN1bHQiLCJjb250ZXh0IiwibW9kZWxzIiwidXNlcnMiLCJjcmVhdGUiLCJ1c2VyX25hbWUiLCJ1c2VyX2VtYWlsIiwidXNlcl9wYXNzd29yZCIsInVzZXJfcm9sZXMiLCJ1c3JvX3JvbGVfaWQiLCJkYXRhVmFsdWVzIiwic2VuZCIsImVycm9yIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJzaWduaW4iLCJmaW5kT25lIiwid2hlcmUiLCJjb21wYXJlIiwic2VuZFN0YXR1cyJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9ub2RlanMvc2VydmVyL3NlcnZlci9jb250cm9sbGVyLyIsInNvdXJjZXMiOlsiVXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuY29uc3QgU0FMVF9ST1VORCA9IDEwO1xuXG5jb25zdCBzaWdudXAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgbGV0IGhhc2hQYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgIGhhc2hQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGhhc2hQYXNzd29yZCwgU0FMVF9ST1VORCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxLmNvbnRleHQubW9kZWxzLnVzZXJzLmNyZWF0ZSh7XG4gICAgICAgICAgICB1c2VyX25hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgdXNlcl9lbWFpbDogZW1haWwsXG4gICAgICAgICAgICB1c2VyX3Bhc3N3b3JkOiBoYXNoUGFzc3dvcmQsXG4gICAgICAgICAgICB1c2VyX3JvbGVzIDp7XG4gICAgICAgICAgICAgICAgdXNyb19yb2xlX2lkOjVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgdXNlcl9uYW1lLCB1c2VyX2VtYWlsIH0gPSByZXN1bHQuZGF0YVZhbHVlcztcbiAgICAgICAgcmVzLnNlbmQoeyB1c2VyX25hbWUsIHVzZXJfZW1haWwgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oZXJyb3IubWVzc2FnZSk7XG4gICAgfVxufVxuXG4vLyB1c2Ugc2lnaW4gd2l0aCB0b2tlbiBpbiBhdXRoSldUXG5jb25zdCBzaWduaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXEuY29udGV4dC5tb2RlbHMudXNlcnMuZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyB1c2VyX25hbWU6IHVzZXJuYW1lIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdXNlcl9uYW1lLCB1c2VyX2VtYWlsLCB1c2VyX3Bhc3N3b3JkIH0gPSByZXN1bHQuZGF0YVZhbHVlcztcbiAgICAgICAgY29uc3QgY29tcGFyZSA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyX3Bhc3N3b3JkKTtcbiAgICAgICAgaWYgKGNvbXBhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7IHVzZXJfbmFtZSwgdXNlcl9lbWFpbCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg0MDQpO1xuICAgICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNDA0KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBzaWdudXAsXG4gICAgc2lnbmluXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUE0QjtBQUM1QixNQUFNQSxVQUFVLEdBQUcsRUFBRTtBQUVyQixNQUFNQyxNQUFNLEdBQUcsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDL0IsTUFBTTtJQUFFQyxRQUFRO0lBQUVDLEtBQUs7SUFBRUM7RUFBUyxDQUFDLEdBQUdKLEdBQUcsQ0FBQ0ssSUFBSTtFQUU5QyxJQUFJQyxZQUFZLEdBQUdGLFFBQVE7RUFDM0JFLFlBQVksR0FBRyxNQUFNQyxlQUFNLENBQUNDLElBQUksQ0FBQ0YsWUFBWSxFQUFFUixVQUFVLENBQUM7RUFDMUQsSUFBSTtJQUNBLE1BQU1XLE1BQU0sR0FBRyxNQUFNVCxHQUFHLENBQUNVLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDQyxLQUFLLENBQUNDLE1BQU0sQ0FBQztNQUNqREMsU0FBUyxFQUFFWixRQUFRO01BQ25CYSxVQUFVLEVBQUVaLEtBQUs7TUFDakJhLGFBQWEsRUFBRVYsWUFBWTtNQUMzQlcsVUFBVSxFQUFFO1FBQ1JDLFlBQVksRUFBQztNQUNqQjtJQUNKLENBQUMsQ0FFQTtJQUNELE1BQU07TUFBRUosU0FBUztNQUFFQztJQUFXLENBQUMsR0FBR04sTUFBTSxDQUFDVSxVQUFVO0lBQ25EbEIsR0FBRyxDQUFDbUIsSUFBSSxDQUFDO01BQUVOLFNBQVM7TUFBRUM7SUFBVyxDQUFDLENBQUM7RUFDdkMsQ0FBQyxDQUFDLE9BQU9NLEtBQUssRUFBRTtJQUNacEIsR0FBRyxDQUFDcUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNGLEtBQUssQ0FBQ0csT0FBTyxDQUFDO0VBQ3ZDO0FBQ0osQ0FBQzs7QUFFRDtBQUNBLE1BQU1DLE1BQU0sR0FBRyxPQUFPekIsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDL0IsTUFBTTtJQUFFQyxRQUFRO0lBQUVFO0VBQVMsQ0FBQyxHQUFHSixHQUFHLENBQUNLLElBQUk7RUFFdkMsSUFBSTtJQUNBLE1BQU1JLE1BQU0sR0FBRyxNQUFNVCxHQUFHLENBQUNVLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDQyxLQUFLLENBQUNjLE9BQU8sQ0FBQztNQUNsREMsS0FBSyxFQUFFO1FBQUViLFNBQVMsRUFBRVo7TUFBUztJQUNqQyxDQUFDLENBQUM7SUFDRixNQUFNO01BQUVZLFNBQVM7TUFBRUMsVUFBVTtNQUFFQztJQUFjLENBQUMsR0FBR1AsTUFBTSxDQUFDVSxVQUFVO0lBQ2xFLE1BQU1TLE9BQU8sR0FBRyxNQUFNckIsZUFBTSxDQUFDcUIsT0FBTyxDQUFDeEIsUUFBUSxFQUFFWSxhQUFhLENBQUM7SUFDN0QsSUFBSVksT0FBTyxFQUFFO01BQ1QsT0FBTzNCLEdBQUcsQ0FBQ21CLElBQUksQ0FBQztRQUFFTixTQUFTO1FBQUVDO01BQVcsQ0FBQyxDQUFDO0lBQzlDLENBQUMsTUFBTTtNQUNILE9BQU9kLEdBQUcsQ0FBQzRCLFVBQVUsQ0FBQyxHQUFHLENBQUM7SUFDOUI7RUFFSixDQUFDLENBQUMsT0FBT1IsS0FBSyxFQUFFO0lBQ1osT0FBT3BCLEdBQUcsQ0FBQzRCLFVBQVUsQ0FBQyxHQUFHLENBQUM7RUFDOUI7QUFDSixDQUFDO0FBQUEsZUFFYztFQUNYOUIsTUFBTTtFQUNOMEI7QUFDSixDQUFDO0FBQUEifQ==","map":{"version":3,"names":["SALT_ROUND","signup","req","res","username","email","password","body","hashPassword","bcrypt","hash","result","context","models","users","create","user_name","user_email","user_password","user_roles","usro_role_id","dataValues","send","error","status","json","message","signin","findOne","where","compare","sendStatus"],"sourceRoot":"/Applications/nodejs/server/server/controller/","sources":["UserController.js"],"sourcesContent":["import bcrypt from 'bcrypt';\nconst SALT_ROUND = 10;\n\nconst signup = async (req, res) => {\n    const { username, email, password } = req.body;\n\n    let hashPassword = password;\n    hashPassword = await bcrypt.hash(hashPassword, SALT_ROUND);\n    try {\n        const result = await req.context.models.users.create({\n            user_name: username,\n            user_email: email,\n            user_password: hashPassword,\n            user_roles :{\n                usro_role_id:5\n            }\n        }\n\n        );\n        const { user_name, user_email } = result.dataValues;\n        res.send({ user_name, user_email });\n    } catch (error) {\n        res.status(404).json(error.message);\n    }\n}\n\n// use sigin with token in authJWT\nconst signin = async (req, res) => {\n    const { username, password } = req.body;\n\n    try {\n        const result = await req.context.models.users.findOne({\n            where: { user_name: username }\n        });\n        const { user_name, user_email, user_password } = result.dataValues;\n        const compare = await bcrypt.compare(password, user_password);\n        if (compare) {\n            return res.send({ user_name, user_email });\n        } else {\n            return res.sendStatus(404);\n        }\n\n    } catch (error) {\n        return res.sendStatus(404);\n    }\n}\n\nexport default {\n    signup,\n    signin\n}"],"mappings":";;;;;;AAAA;AAA4B;AAC5B,MAAMA,UAAU,GAAG,EAAE;AAErB,MAAMC,MAAM,GAAG,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC/B,MAAM;IAAEC,QAAQ;IAAEC,KAAK;IAAEC;EAAS,CAAC,GAAGJ,GAAG,CAACK,IAAI;EAE9C,IAAIC,YAAY,GAAGF,QAAQ;EAC3BE,YAAY,GAAG,MAAMC,eAAM,CAACC,IAAI,CAACF,YAAY,EAAER,UAAU,CAAC;EAC1D,IAAI;IACA,MAAMW,MAAM,GAAG,MAAMT,GAAG,CAACU,OAAO,CAACC,MAAM,CAACC,KAAK,CAACC,MAAM,CAAC;MACjDC,SAAS,EAAEZ,QAAQ;MACnBa,UAAU,EAAEZ,KAAK;MACjBa,aAAa,EAAEV,YAAY;MAC3BW,UAAU,EAAE;QACRC,YAAY,EAAC;MACjB;IACJ,CAAC,CAEA;IACD,MAAM;MAAEJ,SAAS;MAAEC;IAAW,CAAC,GAAGN,MAAM,CAACU,UAAU;IACnDlB,GAAG,CAACmB,IAAI,CAAC;MAAEN,SAAS;MAAEC;IAAW,CAAC,CAAC;EACvC,CAAC,CAAC,OAAOM,KAAK,EAAE;IACZpB,GAAG,CAACqB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACF,KAAK,CAACG,OAAO,CAAC;EACvC;AACJ,CAAC;;AAED;AACA,MAAMC,MAAM,GAAG,OAAOzB,GAAG,EAAEC,GAAG,KAAK;EAC/B,MAAM;IAAEC,QAAQ;IAAEE;EAAS,CAAC,GAAGJ,GAAG,CAACK,IAAI;EAEvC,IAAI;IACA,MAAMI,MAAM,GAAG,MAAMT,GAAG,CAACU,OAAO,CAACC,MAAM,CAACC,KAAK,CAACc,OAAO,CAAC;MAClDC,KAAK,EAAE;QAAEb,SAAS,EAAEZ;MAAS;IACjC,CAAC,CAAC;IACF,MAAM;MAAEY,SAAS;MAAEC,UAAU;MAAEC;IAAc,CAAC,GAAGP,MAAM,CAACU,UAAU;IAClE,MAAMS,OAAO,GAAG,MAAMrB,eAAM,CAACqB,OAAO,CAACxB,QAAQ,EAAEY,aAAa,CAAC;IAC7D,IAAIY,OAAO,EAAE;MACT,OAAO3B,GAAG,CAACmB,IAAI,CAAC;QAAEN,SAAS;QAAEC;MAAW,CAAC,CAAC;IAC9C,CAAC,MAAM;MACH,OAAOd,GAAG,CAAC4B,UAAU,CAAC,GAAG,CAAC;IAC9B;EAEJ,CAAC,CAAC,OAAOR,KAAK,EAAE;IACZ,OAAOpB,GAAG,CAAC4B,UAAU,CAAC,GAAG,CAAC;EAC9B;AACJ,CAAC;AAAA,eAEc;EACX9B,MAAM;EACN0B;AACJ,CAAC;AAAA"}},"mtime":1676367645016},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/models/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass roles extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      role_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      role_name: {\n        type: DataTypes.STRING(25),\n        allowNull: true\n      }\n    }, {\n      sequelize,\n      tableName: 'roles',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"role_id_pk\",\n        unique: true,\n        fields: [{\n          name: \"role_id\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = roles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJyb2xlcyIsImluaXQiLCJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJyb2xlX2lkIiwiYXV0b0luY3JlbWVudCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInJvbGVfbmFtZSIsIlNUUklORyIsInRhYmxlTmFtZSIsInNjaGVtYSIsInRpbWVzdGFtcHMiLCJpbmRleGVzIiwibmFtZSIsInVuaXF1ZSIsImZpZWxkcyJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9ub2RlanMvc2VydmVyL3NlcnZlci9tb2RlbHMvIiwic291cmNlcyI6WyJyb2xlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX3NlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuY29uc3QgeyBNb2RlbCwgU2VxdWVsaXplIH0gPSBfc2VxdWVsaXplO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyByb2xlcyBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpIHtcbiAgcmV0dXJuIHN1cGVyLmluaXQoe1xuICAgIHJvbGVfaWQ6IHtcbiAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBwcmltYXJ5S2V5OiB0cnVlXG4gICAgfSxcbiAgICByb2xlX25hbWU6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoMjUpLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlXG4gICAgfVxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ3JvbGVzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJyb2xlX2lkX3BrXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInJvbGVfaWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgIF1cbiAgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFDbkMsTUFBTTtFQUFFQSxLQUFLO0VBQUVDO0FBQVUsQ0FBQyxHQUFHQyxtQkFBVTtBQUV4QixNQUFNQyxLQUFLLFNBQVNILEtBQUssQ0FBQztFQUN2QyxPQUFPSSxJQUFJLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ2xDLE9BQU8sS0FBSyxDQUFDRixJQUFJLENBQUM7TUFDaEJHLE9BQU8sRUFBRTtRQUNQQyxhQUFhLEVBQUUsSUFBSTtRQUNuQkMsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxLQUFLO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDO01BQ0RDLFNBQVMsRUFBRTtRQUNUSixJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFO01BQ2I7SUFDRixDQUFDLEVBQUU7TUFDRE4sU0FBUztNQUNUVSxTQUFTLEVBQUUsT0FBTztNQUNsQkMsTUFBTSxFQUFFLFFBQVE7TUFDaEJDLFVBQVUsRUFBRSxLQUFLO01BQ2pCQyxPQUFPLEVBQUUsQ0FDUDtRQUNFQyxJQUFJLEVBQUUsWUFBWTtRQUNsQkMsTUFBTSxFQUFFLElBQUk7UUFDWkMsTUFBTSxFQUFFLENBQ047VUFBRUYsSUFBSSxFQUFFO1FBQVUsQ0FBQztNQUV2QixDQUFDO0lBRUwsQ0FBQyxDQUFDO0VBQ0Y7QUFDRjtBQUFDIn0=","map":{"version":3,"names":["Model","Sequelize","_sequelize","roles","init","sequelize","DataTypes","role_id","autoIncrement","type","INTEGER","allowNull","primaryKey","role_name","STRING","tableName","schema","timestamps","indexes","name","unique","fields"],"sourceRoot":"/Applications/nodejs/server/server/models/","sources":["roles.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class roles extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    role_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    role_name: {\n      type: DataTypes.STRING(25),\n      allowNull: true\n    }\n  }, {\n    sequelize,\n    tableName: 'roles',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"role_id_pk\",\n        unique: true,\n        fields: [\n          { name: \"role_id\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,KAAK,SAASH,KAAK,CAAC;EACvC,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,SAAS,EAAE;QACTJ,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE;MACb;IACF,CAAC,EAAE;MACDN,SAAS;MACTU,SAAS,EAAE,OAAO;MAClBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,YAAY;QAClBC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,CACN;UAAEF,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1676370401662},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/models/user_roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass user_roles extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      usro_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      usro_user_id: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n        references: {\n          model: 'users',\n          key: 'user_id'\n        }\n      },\n      usro_role_id: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n        references: {\n          model: 'roles',\n          key: 'role_id'\n        }\n      }\n    }, {\n      sequelize,\n      tableName: 'user_roles',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"usro_id_pk\",\n        unique: true,\n        fields: [{\n          name: \"usro_id\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = user_roles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJ1c2VyX3JvbGVzIiwiaW5pdCIsInNlcXVlbGl6ZSIsIkRhdGFUeXBlcyIsInVzcm9faWQiLCJhdXRvSW5jcmVtZW50IiwidHlwZSIsIklOVEVHRVIiLCJhbGxvd051bGwiLCJwcmltYXJ5S2V5IiwidXNyb191c2VyX2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwia2V5IiwidXNyb19yb2xlX2lkIiwidGFibGVOYW1lIiwic2NoZW1hIiwidGltZXN0YW1wcyIsImluZGV4ZXMiLCJuYW1lIiwidW5pcXVlIiwiZmllbGRzIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXJfcm9sZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9zZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmNvbnN0IHsgTW9kZWwsIFNlcXVlbGl6ZSB9ID0gX3NlcXVlbGl6ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdXNlcl9yb2xlcyBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpIHtcbiAgcmV0dXJuIHN1cGVyLmluaXQoe1xuICAgIHVzcm9faWQ6IHtcbiAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBwcmltYXJ5S2V5OiB0cnVlXG4gICAgfSxcbiAgICB1c3JvX3VzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICBtb2RlbDogJ3VzZXJzJyxcbiAgICAgICAga2V5OiAndXNlcl9pZCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHVzcm9fcm9sZV9pZDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgIG1vZGVsOiAncm9sZXMnLFxuICAgICAgICBrZXk6ICdyb2xlX2lkJ1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICB0YWJsZU5hbWU6ICd1c2VyX3JvbGVzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c3JvX2lkX3BrXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzcm9faWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgIF1cbiAgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFDbkMsTUFBTTtFQUFFQSxLQUFLO0VBQUVDO0FBQVUsQ0FBQyxHQUFHQyxtQkFBVTtBQUV4QixNQUFNQyxVQUFVLFNBQVNILEtBQUssQ0FBQztFQUM1QyxPQUFPSSxJQUFJLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ2xDLE9BQU8sS0FBSyxDQUFDRixJQUFJLENBQUM7TUFDaEJHLE9BQU8sRUFBRTtRQUNQQyxhQUFhLEVBQUUsSUFBSTtRQUNuQkMsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxLQUFLO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDO01BQ0RDLFlBQVksRUFBRTtRQUNaSixJQUFJLEVBQUVILFNBQVMsQ0FBQ0ksT0FBTztRQUN2QkMsU0FBUyxFQUFFLElBQUk7UUFDZkcsVUFBVSxFQUFFO1VBQ1ZDLEtBQUssRUFBRSxPQUFPO1VBQ2RDLEdBQUcsRUFBRTtRQUNQO01BQ0YsQ0FBQztNQUNEQyxZQUFZLEVBQUU7UUFDWlIsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxJQUFJO1FBQ2ZHLFVBQVUsRUFBRTtVQUNWQyxLQUFLLEVBQUUsT0FBTztVQUNkQyxHQUFHLEVBQUU7UUFDUDtNQUNGO0lBQ0YsQ0FBQyxFQUFFO01BQ0RYLFNBQVM7TUFDVGEsU0FBUyxFQUFFLFlBQVk7TUFDdkJDLE1BQU0sRUFBRSxRQUFRO01BQ2hCQyxVQUFVLEVBQUUsS0FBSztNQUNqQkMsT0FBTyxFQUFFLENBQ1A7UUFDRUMsSUFBSSxFQUFFLFlBQVk7UUFDbEJDLE1BQU0sRUFBRSxJQUFJO1FBQ1pDLE1BQU0sRUFBRSxDQUNOO1VBQUVGLElBQUksRUFBRTtRQUFVLENBQUM7TUFFdkIsQ0FBQztJQUVMLENBQUMsQ0FBQztFQUNGO0FBQ0Y7QUFBQyJ9","map":{"version":3,"names":["Model","Sequelize","_sequelize","user_roles","init","sequelize","DataTypes","usro_id","autoIncrement","type","INTEGER","allowNull","primaryKey","usro_user_id","references","model","key","usro_role_id","tableName","schema","timestamps","indexes","name","unique","fields"],"sourceRoot":"/Applications/nodejs/server/server/models/","sources":["user_roles.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class user_roles extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    usro_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    usro_user_id: {\n      type: DataTypes.INTEGER,\n      allowNull: true,\n      references: {\n        model: 'users',\n        key: 'user_id'\n      }\n    },\n    usro_role_id: {\n      type: DataTypes.INTEGER,\n      allowNull: true,\n      references: {\n        model: 'roles',\n        key: 'role_id'\n      }\n    }\n  }, {\n    sequelize,\n    tableName: 'user_roles',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"usro_id_pk\",\n        unique: true,\n        fields: [\n          { name: \"usro_id\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,UAAU,SAASH,KAAK,CAAC;EAC5C,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,YAAY,EAAE;QACZJ,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,IAAI;QACfG,UAAU,EAAE;UACVC,KAAK,EAAE,OAAO;UACdC,GAAG,EAAE;QACP;MACF,CAAC;MACDC,YAAY,EAAE;QACZR,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,IAAI;QACfG,UAAU,EAAE;UACVC,KAAK,EAAE,OAAO;UACdC,GAAG,EAAE;QACP;MACF;IACF,CAAC,EAAE;MACDX,SAAS;MACTa,SAAS,EAAE,YAAY;MACvBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,YAAY;QAClBC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,CACN;UAAEF,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1676370401670},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/models/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass users extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      user_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      user_name: {\n        type: DataTypes.STRING(20),\n        allowNull: true,\n        unique: \"user_name_uq\"\n      },\n      user_email: {\n        type: DataTypes.STRING(55),\n        allowNull: true,\n        unique: \"user_email_uq\"\n      },\n      user_password: {\n        type: DataTypes.STRING(255),\n        allowNull: true\n      },\n      user_handphone: {\n        type: DataTypes.STRING(15),\n        allowNull: true,\n        unique: \"user_handphone_uq\"\n      }\n    }, {\n      sequelize,\n      tableName: 'users',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"user_email_uq\",\n        unique: true,\n        fields: [{\n          name: \"user_email\"\n        }]\n      }, {\n        name: \"user_handphone_uq\",\n        unique: true,\n        fields: [{\n          name: \"user_handphone\"\n        }]\n      }, {\n        name: \"user_id_pk\",\n        unique: true,\n        fields: [{\n          name: \"user_id\"\n        }]\n      }, {\n        name: \"user_name_uq\",\n        unique: true,\n        fields: [{\n          name: \"user_name\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = users;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJ1c2VycyIsImluaXQiLCJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJ1c2VyX2lkIiwiYXV0b0luY3JlbWVudCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInVzZXJfbmFtZSIsIlNUUklORyIsInVuaXF1ZSIsInVzZXJfZW1haWwiLCJ1c2VyX3Bhc3N3b3JkIiwidXNlcl9oYW5kcGhvbmUiLCJ0YWJsZU5hbWUiLCJzY2hlbWEiLCJ0aW1lc3RhbXBzIiwiaW5kZXhlcyIsIm5hbWUiLCJmaWVsZHMiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvbm9kZWpzL3NlcnZlci9zZXJ2ZXIvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9zZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmNvbnN0IHsgTW9kZWwsIFNlcXVlbGl6ZSB9ID0gX3NlcXVlbGl6ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdXNlcnMgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSB7XG4gIHJldHVybiBzdXBlci5pbml0KHtcbiAgICB1c2VyX2lkOiB7XG4gICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZVxuICAgIH0sXG4gICAgdXNlcl9uYW1lOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDIwKSxcbiAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogXCJ1c2VyX25hbWVfdXFcIlxuICAgIH0sXG4gICAgdXNlcl9lbWFpbDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyg1NSksXG4gICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICB1bmlxdWU6IFwidXNlcl9lbWFpbF91cVwiXG4gICAgfSxcbiAgICB1c2VyX3Bhc3N3b3JkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDI1NSksXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIHVzZXJfaGFuZHBob25lOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDE1KSxcbiAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogXCJ1c2VyX2hhbmRwaG9uZV91cVwiXG4gICAgfVxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ3VzZXJzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2VyX2VtYWlsX3VxXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfZW1haWxcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInVzZXJfaGFuZHBob25lX3VxXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfaGFuZHBob25lXCIgfSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2VyX2lkX3BrXCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfaWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInVzZXJfbmFtZV91cVwiLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIGZpZWxkczogW1xuICAgICAgICAgIHsgbmFtZTogXCJ1c2VyX25hbWVcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgIF1cbiAgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFDbkMsTUFBTTtFQUFFQSxLQUFLO0VBQUVDO0FBQVUsQ0FBQyxHQUFHQyxtQkFBVTtBQUV4QixNQUFNQyxLQUFLLFNBQVNILEtBQUssQ0FBQztFQUN2QyxPQUFPSSxJQUFJLENBQUNDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ2xDLE9BQU8sS0FBSyxDQUFDRixJQUFJLENBQUM7TUFDaEJHLE9BQU8sRUFBRTtRQUNQQyxhQUFhLEVBQUUsSUFBSTtRQUNuQkMsSUFBSSxFQUFFSCxTQUFTLENBQUNJLE9BQU87UUFDdkJDLFNBQVMsRUFBRSxLQUFLO1FBQ2hCQyxVQUFVLEVBQUU7TUFDZCxDQUFDO01BQ0RDLFNBQVMsRUFBRTtRQUNUSixJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFLElBQUk7UUFDZkksTUFBTSxFQUFFO01BQ1YsQ0FBQztNQUNEQyxVQUFVLEVBQUU7UUFDVlAsSUFBSSxFQUFFSCxTQUFTLENBQUNRLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDMUJILFNBQVMsRUFBRSxJQUFJO1FBQ2ZJLE1BQU0sRUFBRTtNQUNWLENBQUM7TUFDREUsYUFBYSxFQUFFO1FBQ2JSLElBQUksRUFBRUgsU0FBUyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzNCSCxTQUFTLEVBQUU7TUFDYixDQUFDO01BQ0RPLGNBQWMsRUFBRTtRQUNkVCxJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFLElBQUk7UUFDZkksTUFBTSxFQUFFO01BQ1Y7SUFDRixDQUFDLEVBQUU7TUFDRFYsU0FBUztNQUNUYyxTQUFTLEVBQUUsT0FBTztNQUNsQkMsTUFBTSxFQUFFLFFBQVE7TUFDaEJDLFVBQVUsRUFBRSxLQUFLO01BQ2pCQyxPQUFPLEVBQUUsQ0FDUDtRQUNFQyxJQUFJLEVBQUUsZUFBZTtRQUNyQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQWEsQ0FBQztNQUUxQixDQUFDLEVBQ0Q7UUFDRUEsSUFBSSxFQUFFLG1CQUFtQjtRQUN6QlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQWlCLENBQUM7TUFFOUIsQ0FBQyxFQUNEO1FBQ0VBLElBQUksRUFBRSxZQUFZO1FBQ2xCUixNQUFNLEVBQUUsSUFBSTtRQUNaUyxNQUFNLEVBQUUsQ0FDTjtVQUFFRCxJQUFJLEVBQUU7UUFBVSxDQUFDO01BRXZCLENBQUMsRUFDRDtRQUNFQSxJQUFJLEVBQUUsY0FBYztRQUNwQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQVksQ0FBQztNQUV6QixDQUFDO0lBRUwsQ0FBQyxDQUFDO0VBQ0Y7QUFDRjtBQUFDIn0=","map":{"version":3,"names":["Model","Sequelize","_sequelize","users","init","sequelize","DataTypes","user_id","autoIncrement","type","INTEGER","allowNull","primaryKey","user_name","STRING","unique","user_email","user_password","user_handphone","tableName","schema","timestamps","indexes","name","fields"],"sourceRoot":"/Applications/nodejs/server/server/models/","sources":["users.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class users extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    user_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    user_name: {\n      type: DataTypes.STRING(20),\n      allowNull: true,\n      unique: \"user_name_uq\"\n    },\n    user_email: {\n      type: DataTypes.STRING(55),\n      allowNull: true,\n      unique: \"user_email_uq\"\n    },\n    user_password: {\n      type: DataTypes.STRING(255),\n      allowNull: true\n    },\n    user_handphone: {\n      type: DataTypes.STRING(15),\n      allowNull: true,\n      unique: \"user_handphone_uq\"\n    }\n  }, {\n    sequelize,\n    tableName: 'users',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"user_email_uq\",\n        unique: true,\n        fields: [\n          { name: \"user_email\" },\n        ]\n      },\n      {\n        name: \"user_handphone_uq\",\n        unique: true,\n        fields: [\n          { name: \"user_handphone\" },\n        ]\n      },\n      {\n        name: \"user_id_pk\",\n        unique: true,\n        fields: [\n          { name: \"user_id\" },\n        ]\n      },\n      {\n        name: \"user_name_uq\",\n        unique: true,\n        fields: [\n          { name: \"user_name\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,KAAK,SAASH,KAAK,CAAC;EACvC,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,SAAS,EAAE;QACTJ,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,IAAI;QACfI,MAAM,EAAE;MACV,CAAC;MACDC,UAAU,EAAE;QACVP,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,IAAI;QACfI,MAAM,EAAE;MACV,CAAC;MACDE,aAAa,EAAE;QACbR,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,GAAG,CAAC;QAC3BH,SAAS,EAAE;MACb,CAAC;MACDO,cAAc,EAAE;QACdT,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,IAAI;QACfI,MAAM,EAAE;MACV;IACF,CAAC,EAAE;MACDV,SAAS;MACTc,SAAS,EAAE,OAAO;MAClBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,eAAe;QACrBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAa,CAAC;MAE1B,CAAC,EACD;QACEA,IAAI,EAAE,mBAAmB;QACzBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAiB,CAAC;MAE9B,CAAC,EACD;QACEA,IAAI,EAAE,YAAY;QAClBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC,EACD;QACEA,IAAI,EAAE,cAAc;QACpBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAY,CAAC;MAEzB,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1676370401679},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/routes/IndexRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _UserRoute = _interopRequireDefault(require(\"./UserRoute\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  UserRoute: _UserRoute.default\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyUm91dGUiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvbm9kZWpzL3NlcnZlci9zZXJ2ZXIvcm91dGVzLyIsInNvdXJjZXMiOlsiSW5kZXhSb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlclJvdXRlIGZyb20gXCIuL1VzZXJSb3V0ZVwiXG5cbmV4cG9ydCBkZWZhdWx0e1xuICAgIFVzZXJSb3V0ZVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBbUM7QUFBQSxlQUVyQjtFQUNWQSxTQUFTLEVBQVRBO0FBQ0osQ0FBQztBQUFBIn0=","map":{"version":3,"names":["UserRoute"],"sourceRoot":"/Applications/nodejs/server/server/routes/","sources":["IndexRoute.js"],"sourcesContent":["import UserRoute from \"./UserRoute\"\n\nexport default{\n    UserRoute\n}"],"mappings":";;;;;;AAAA;AAAmC;AAAA,eAErB;EACVA,SAAS,EAATA;AACJ,CAAC;AAAA"}},"mtime":1676366618058},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/routes/UserRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _authJWT = _interopRequireDefault(require(\"../helpers/authJWT\"));\nvar _IndexController = _interopRequireDefault(require(\"../controller/IndexController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst router = (0, _express.Router)();\nrouter.post(\"/signin\", _authJWT.default.authenticate, _authJWT.default.login);\nrouter.post(\"/signup\", _IndexController.default.UserController.signup);\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiYXV0aEpXVCIsImF1dGhlbnRpY2F0ZSIsImxvZ2luIiwiSW5kZXhDb250cm9sbGVyIiwiVXNlckNvbnRyb2xsZXIiLCJzaWdudXAiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvbm9kZWpzL3NlcnZlci9zZXJ2ZXIvcm91dGVzLyIsInNvdXJjZXMiOlsiVXNlclJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgYXV0aEpXVCBmcm9tIFwiLi4vaGVscGVycy9hdXRoSldUXCI7XG5pbXBvcnQgSW5kZXhDb250cm9sbGVyIGZyb20gXCIuLi9jb250cm9sbGVyL0luZGV4Q29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLnBvc3QoXCIvc2lnbmluXCIsYXV0aEpXVC5hdXRoZW50aWNhdGUsYXV0aEpXVC5sb2dpbik7XG5yb3V0ZXIucG9zdChcIi9zaWdudXBcIixJbmRleENvbnRyb2xsZXIuVXNlckNvbnRyb2xsZXIuc2lnbnVwKTtcbi8vcm91dGVyLnBvc3QoXCIvcmVmcmVzaHRva2VuXCIsYXV0aEpXVC5yZWZyZXNoVG9rZW4pXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUE0RDtBQUU1RCxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsZUFBTSxHQUFFO0FBRXZCRCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUNDLGdCQUFPLENBQUNDLFlBQVksRUFBQ0QsZ0JBQU8sQ0FBQ0UsS0FBSyxDQUFDO0FBQ3pETCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUNJLHdCQUFlLENBQUNDLGNBQWMsQ0FBQ0MsTUFBTSxDQUFDO0FBQzVEO0FBQUEsZUFFZVIsTUFBTTtBQUFBIn0=","map":{"version":3,"names":["router","Router","post","authJWT","authenticate","login","IndexController","UserController","signup"],"sourceRoot":"/Applications/nodejs/server/server/routes/","sources":["UserRoute.js"],"sourcesContent":["import { Router } from \"express\";\nimport authJWT from \"../helpers/authJWT\";\nimport IndexController from \"../controller/IndexController\";\n\nconst router = Router();\n\nrouter.post(\"/signin\",authJWT.authenticate,authJWT.login);\nrouter.post(\"/signup\",IndexController.UserController.signup);\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\n\nexport default router;"],"mappings":";;;;;;AAAA;AACA;AACA;AAA4D;AAE5D,MAAMA,MAAM,GAAG,IAAAC,eAAM,GAAE;AAEvBD,MAAM,CAACE,IAAI,CAAC,SAAS,EAACC,gBAAO,CAACC,YAAY,EAACD,gBAAO,CAACE,KAAK,CAAC;AACzDL,MAAM,CAACE,IAAI,CAAC,SAAS,EAACI,wBAAe,CAACC,cAAc,CAACC,MAAM,CAAC;AAC5D;AAAA,eAEeR,MAAM;AAAA"}},"mtime":1676366768768},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/nodejs/server/server/helpers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/nodejs/server\",\"filename\":\"/Applications/nodejs/server/server/helpers/authJWT.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _initModels = _interopRequireDefault(require(\"../models/init-models\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst jwt = require('jsonwebtoken');\nconst passport = require('passport');\nconst Strategy = require('passport-local').Strategy;\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt';\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret';\nconst jwtOpts = {\n  algorithm: 'HS256',\n  expiresIn: '30d'\n};\n//passport.use(adminStrategy())\n\npassport.use(new Strategy({\n  usernameField: 'username',\n  passwordField: 'password'\n}, async function (username, password, cb) {\n  try {\n    const result = await _initModels.default.users.findOne({\n      include: [{\n        include: [{\n          model: _initModels.default.roles\n        }],\n        model: _initModels.default.user_roles\n      }],\n      where: {\n        user_name: username\n      }\n    });\n    const {\n      user_name,\n      user_id,\n      user_password,\n      user_email,\n      user_roles: [{\n        role: {\n          role_name\n        }\n      }]\n    } = result.dataValues;\n    const compare = await _bcrypt.default.compare(password, user_password);\n    if (compare) return cb(null, {\n      username: user_name,\n      userId: user_id,\n      email: user_email,\n      userRoles: role_name\n    });\n  } catch (error) {\n    return cb(null, error.message);\n  }\n  cb(null, false);\n}));\nconst authenticate = passport.authenticate('local', {\n  session: false\n});\nmodule.exports = {\n  authenticate,\n  login: login,\n  ensureAdmin: ensureAdmin,\n  ensureSeller: ensureSeller,\n  refreshToken: refreshToken\n};\nasync function login(req, res, next) {\n  console.log(1234567890, req.user);\n  const token = await sign({\n    username: req.user.username,\n    roleType: req.user.userRoles\n  });\n  const {\n    userId,\n    username,\n    email,\n    userRoles\n  } = req.user;\n  console.log(req.user);\n  res.cookie('jwt', token, {\n    httpOnly: true\n  });\n  res.json({\n    profile: {\n      userId,\n      username,\n      email,\n      userRoles\n    },\n    success: true,\n    token: token\n  });\n}\nasync function sign(payload) {\n  const token = await jwt.sign(payload, jwtSecret, jwtOpts);\n  return token;\n}\nasync function ensureSeller(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username) {\n    req.user = payload;\n    if (req.user.roleType === 'Seller') req.isSeller = true;\n    return next();\n  }\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function ensureAdmin(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username === 'admin') return next();\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function verify(jwtString = '') {\n  jwtString = jwtString.replace(/^Bearer /i, '');\n  try {\n    const payload = await jwt.verify(jwtString, jwtSecret);\n    return payload;\n  } catch (err) {\n    err.statusCode = 401;\n    throw err;\n  }\n}\nasync function refreshToken(req, res) {\n  const {\n    refreshToken: requestToken\n  } = req.body;\n  if (requestToken == null) {\n    return res.status(403).json({\n      message: \"Refresh Token is required!\"\n    });\n  }\n  try {\n    const result = await _initModels.default.tokens.findOne({\n      where: {\n        token_id: refreshToken\n      }\n    });\n    if (!refreshToken) {\n      res.status(403).json({\n        message: \"Refresh token is not in database!\"\n      });\n      return;\n    }\n    if (result.token_expire_date.getTime() < new Date().getTime()) {\n      res.status(403).json({\n        message: \"Refresh token was expired. Please make a new signin request\"\n      });\n      return;\n    }\n    let newAccessToken = jwt.sign({\n      id: user.id\n    }, config.secret, {\n      expiresIn: config.jwtExpiration\n    });\n    return res.status(200).json({\n      accessToken: newAccessToken,\n      refreshToken: refreshToken.token\n    });\n  } catch (error) {\n    return res.status(500).send({\n      message: error\n    });\n  }\n}\n\n// function adminStrategy() {\n\n//     return new Strategy(async function (username, password, cb) {\n//         try {\n//             const result = await models.users.findOne({\n//                 where: { user_email: username }\n//             });\n\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\n//             const compare = await bcrypt.compare(password, user_password);\n\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\n//         } catch (error) {\n//             //console.log(error);\n//             return cb(null, error)\n//         }\n\n//         cb(null, false)\n//     })\n// }\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwicGFzc3BvcnQiLCJTdHJhdGVneSIsImp3dFNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiYWRtaW5QYXNzd29yZCIsIkFETUlOX1BBU1NXT1JEIiwiand0T3B0cyIsImFsZ29yaXRobSIsImV4cGlyZXNJbiIsInVzZSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImNiIiwicmVzdWx0IiwibW9kZWxzIiwidXNlcnMiLCJmaW5kT25lIiwiaW5jbHVkZSIsIm1vZGVsIiwicm9sZXMiLCJ1c2VyX3JvbGVzIiwid2hlcmUiLCJ1c2VyX25hbWUiLCJ1c2VyX2lkIiwidXNlcl9wYXNzd29yZCIsInVzZXJfZW1haWwiLCJyb2xlIiwicm9sZV9uYW1lIiwiZGF0YVZhbHVlcyIsImNvbXBhcmUiLCJiY3J5cHQiLCJ1c2VySWQiLCJlbWFpbCIsInVzZXJSb2xlcyIsImVycm9yIiwibWVzc2FnZSIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJtb2R1bGUiLCJleHBvcnRzIiwibG9naW4iLCJlbnN1cmVBZG1pbiIsImVuc3VyZVNlbGxlciIsInJlZnJlc2hUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwidXNlciIsInRva2VuIiwic2lnbiIsInJvbGVUeXBlIiwiY29va2llIiwiaHR0cE9ubHkiLCJqc29uIiwicHJvZmlsZSIsInN1Y2Nlc3MiLCJwYXlsb2FkIiwiand0U3RyaW5nIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJjb29raWVzIiwidmVyaWZ5IiwiaXNTZWxsZXIiLCJlcnIiLCJFcnJvciIsInN0YXR1c0NvZGUiLCJyZXBsYWNlIiwicmVxdWVzdFRva2VuIiwiYm9keSIsInN0YXR1cyIsInRva2VucyIsInRva2VuX2lkIiwidG9rZW5fZXhwaXJlX2RhdGUiLCJnZXRUaW1lIiwiRGF0ZSIsIm5ld0FjY2Vzc1Rva2VuIiwiaWQiLCJjb25maWciLCJzZWNyZXQiLCJqd3RFeHBpcmF0aW9uIiwiYWNjZXNzVG9rZW4iLCJzZW5kIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL25vZGVqcy9zZXJ2ZXIvc2VydmVyL2hlbHBlcnMvIiwic291cmNlcyI6WyJhdXRoSldULmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXG5jb25zdCBwYXNzcG9ydCA9IHJlcXVpcmUoJ3Bhc3Nwb3J0JylcbmNvbnN0IFN0cmF0ZWd5ID0gcmVxdWlyZSgncGFzc3BvcnQtbG9jYWwnKS5TdHJhdGVneVxuXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5cbmNvbnN0IGp3dFNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ215and0J1xuY29uc3QgYWRtaW5QYXNzd29yZCA9IHByb2Nlc3MuZW52LkFETUlOX1BBU1NXT1JEIHx8ICdzZWNyZXQnXG5jb25zdCBqd3RPcHRzID0geyBhbGdvcml0aG06ICdIUzI1NicsIGV4cGlyZXNJbjogJzMwZCcgfVxuaW1wb3J0IG1vZGVscyBmcm9tICcuLi9tb2RlbHMvaW5pdC1tb2RlbHMnXG5cbi8vcGFzc3BvcnQudXNlKGFkbWluU3RyYXRlZ3koKSlcblxucGFzc3BvcnQudXNlKG5ldyBTdHJhdGVneSh7XG4gICAgdXNlcm5hbWVGaWVsZDogJ3VzZXJuYW1lJyxcbiAgICBwYXNzd29yZEZpZWxkOiAncGFzc3dvcmQnXG59LFxuICAgIGFzeW5jIGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQsIGNiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2RlbHMudXNlcnMuZmluZE9uZSh7XG4gICAgICAgICAgICAgIGluY2x1ZGU6W3tpbmNsdWRlOlt7bW9kZWw6bW9kZWxzLnJvbGVzfV0sIG1vZGVsOm1vZGVscy51c2VyX3JvbGVzfV0sICB3aGVyZTogeyB1c2VyX25hbWU6IHVzZXJuYW1lIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB7IHVzZXJfbmFtZSwgdXNlcl9pZCwgdXNlcl9wYXNzd29yZCwgdXNlcl9lbWFpbCx1c2VyX3JvbGVzOlt7cm9sZTp7cm9sZV9uYW1lfX1dfSA9IHJlc3VsdC5kYXRhVmFsdWVzO1xuICAgICAgICAgICAgY29uc3QgY29tcGFyZSA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyX3Bhc3N3b3JkKTtcblxuICAgICAgICAgICAgaWYgKGNvbXBhcmUpIHJldHVybiBjYihudWxsLCB7IHVzZXJuYW1lOiB1c2VyX25hbWUsIHVzZXJJZDogdXNlcl9pZCwgZW1haWw6IHVzZXJfZW1haWwsIHVzZXJSb2xlczogcm9sZV9uYW1lfSlcblxuXG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBjYihudWxsLCBlcnJvci5tZXNzYWdlKVxuICAgICAgICB9XG5cbiAgICAgICAgY2IobnVsbCwgZmFsc2UpXG4gICAgfVxuKSlcblxuY29uc3QgYXV0aGVudGljYXRlID0gcGFzc3BvcnQuYXV0aGVudGljYXRlKCdsb2NhbCcsIHsgc2Vzc2lvbjogZmFsc2UgfSlcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgYXV0aGVudGljYXRlLFxuICAgIGxvZ2luOiBsb2dpbixcbiAgICBlbnN1cmVBZG1pbjogZW5zdXJlQWRtaW4sXG4gICAgZW5zdXJlU2VsbGVyOiBlbnN1cmVTZWxsZXIsXG4gICAgcmVmcmVzaFRva2VuIDogcmVmcmVzaFRva2VuXG59XG5cblxuXG5hc3luYyBmdW5jdGlvbiBsb2dpbihyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnNvbGUubG9nKDEyMzQ1Njc4OTAsIHJlcS51c2VyKTtcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHNpZ24oeyB1c2VybmFtZTogcmVxLnVzZXIudXNlcm5hbWUsIHJvbGVUeXBlOiByZXEudXNlci51c2VyUm9sZXMgfSk7XG4gICAgY29uc3QgeyB1c2VySWQsIHVzZXJuYW1lLCBlbWFpbCwgdXNlclJvbGVzIH0gPSByZXEudXNlcjtcbiAgICBjb25zb2xlLmxvZyhyZXEudXNlcik7XG4gICAgcmVzLmNvb2tpZSgnand0JywgdG9rZW4sIHsgaHR0cE9ubHk6IHRydWUgfSlcblxuICAgIHJlcy5qc29uKHsgcHJvZmlsZTogeyB1c2VySWQsIHVzZXJuYW1lLCBlbWFpbCwgdXNlclJvbGVzIH0sIHN1Y2Nlc3M6IHRydWUsIHRva2VuOiB0b2tlbiB9KVxufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIHNpZ24ocGF5bG9hZCkge1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgand0LnNpZ24ocGF5bG9hZCwgand0U2VjcmV0LCBqd3RPcHRzKVxuICAgIHJldHVybiB0b2tlblxufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVTZWxsZXIocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBqd3RTdHJpbmcgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uIHx8IHJlcS5jb29raWVzLmp3dFxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnkoand0U3RyaW5nKVxuICAgIGlmIChwYXlsb2FkLnVzZXJuYW1lKSB7XG4gICAgICAgIHJlcS51c2VyID0gcGF5bG9hZDtcbiAgICAgICAgaWYgKHJlcS51c2VyLnJvbGVUeXBlID09PSAnU2VsbGVyJykgcmVxLmlzU2VsbGVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxO1xuICAgIG5leHQoZXJyKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlQWRtaW4ocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBqd3RTdHJpbmcgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uIHx8IHJlcS5jb29raWVzLmp3dFxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnkoand0U3RyaW5nKVxuICAgIGlmIChwYXlsb2FkLnVzZXJuYW1lID09PSAnYWRtaW4nKSByZXR1cm4gbmV4dCgpXG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKVxuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxXG4gICAgbmV4dChlcnIpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeShqd3RTdHJpbmcgPSAnJykge1xuICAgIGp3dFN0cmluZyA9IGp3dFN0cmluZy5yZXBsYWNlKC9eQmVhcmVyIC9pLCAnJylcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgand0LnZlcmlmeShqd3RTdHJpbmcsIGp3dFNlY3JldClcbiAgICAgICAgcmV0dXJuIHBheWxvYWRcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLnN0YXR1c0NvZGUgPSA0MDFcbiAgICAgICAgdGhyb3cgZXJyXG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiByZWZyZXNoVG9rZW4ocmVxLCByZXMpIHtcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbjogcmVxdWVzdFRva2VuIH0gPSByZXEuYm9keTtcblxuICAgIGlmIChyZXF1ZXN0VG9rZW4gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIlJlZnJlc2ggVG9rZW4gaXMgcmVxdWlyZWQhXCIgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWxzLnRva2Vucy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHRva2VuX2lkOiByZWZyZXNoVG9rZW4gfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIlJlZnJlc2ggdG9rZW4gaXMgbm90IGluIGRhdGFiYXNlIVwiIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdC50b2tlbl9leHBpcmVfZGF0ZS5nZXRUaW1lKCkgPCBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVmcmVzaCB0b2tlbiB3YXMgZXhwaXJlZC4gUGxlYXNlIG1ha2UgYSBuZXcgc2lnbmluIHJlcXVlc3RcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5ld0FjY2Vzc1Rva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5pZCB9LCBjb25maWcuc2VjcmV0LCB7XG4gICAgICAgICAgICBleHBpcmVzSW46IGNvbmZpZy5qd3RFeHBpcmF0aW9uLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogbmV3QWNjZXNzVG9rZW4sXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbi50b2tlbixcbiAgICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnJvciB9KTtcbiAgICB9XG5cblxufVxuXG4vLyBmdW5jdGlvbiBhZG1pblN0cmF0ZWd5KCkge1xuXG4vLyAgICAgcmV0dXJuIG5ldyBTdHJhdGVneShhc3luYyBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBjYikge1xuLy8gICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWxzLnVzZXJzLmZpbmRPbmUoe1xuLy8gICAgICAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJfZW1haWw6IHVzZXJuYW1lIH1cbi8vICAgICAgICAgICAgIH0pO1xuXG4vLyAgICAgICAgICAgICBjb25zdCB7IHVzZXJfbmFtZSwgdXNlcl9pZCwgdXNlcl9wYXNzd29yZCwgdXNlcl9lbWFpbCwgdXNlcl9yb2xlX3R5cGUgfSA9IHJlc3VsdC5kYXRhVmFsdWVzO1xuLy8gICAgICAgICAgICAgY29uc3QgY29tcGFyZSA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyX3Bhc3N3b3JkKTtcblxuLy8gICAgICAgICAgICAgaWYgKGNvbXBhcmUpIHJldHVybiBjYihudWxsLCB7IHVzZXJuYW1lOiB1c2VyX25hbWUsIHVzZXJJZDogdXNlcl9pZCwgZW1haWw6IHVzZXJfZW1haWwsIHJvbGVUeXBlOiB1c2VyX3JvbGVfdHlwZSB9KVxuLy8gICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlcnJvcik7XG4vLyAgICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgZXJyb3IpXG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICBjYihudWxsLCBmYWxzZSlcbi8vICAgICB9KVxuLy8gfSJdLCJtYXBwaW5ncyI6Ijs7QUFJQTtBQUtBO0FBQTBDO0FBVDFDLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTUUsUUFBUSxHQUFHRixPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQ0UsUUFBUTtBQUluRCxNQUFNQyxTQUFTLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLElBQUksT0FBTztBQUNuRCxNQUFNQyxhQUFhLEdBQUdILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxjQUFjLElBQUksUUFBUTtBQUM1RCxNQUFNQyxPQUFPLEdBQUc7RUFBRUMsU0FBUyxFQUFFLE9BQU87RUFBRUMsU0FBUyxFQUFFO0FBQU0sQ0FBQztBQUd4RDs7QUFFQVYsUUFBUSxDQUFDVyxHQUFHLENBQUMsSUFBSVYsUUFBUSxDQUFDO0VBQ3RCVyxhQUFhLEVBQUUsVUFBVTtFQUN6QkMsYUFBYSxFQUFFO0FBQ25CLENBQUMsRUFDRyxnQkFBZ0JDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxFQUFFLEVBQUU7RUFDcEMsSUFBSTtJQUNBLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxtQkFBTSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQztNQUN4Q0MsT0FBTyxFQUFDLENBQUM7UUFBQ0EsT0FBTyxFQUFDLENBQUM7VUFBQ0MsS0FBSyxFQUFDSixtQkFBTSxDQUFDSztRQUFLLENBQUMsQ0FBQztRQUFFRCxLQUFLLEVBQUNKLG1CQUFNLENBQUNNO01BQVUsQ0FBQyxDQUFDO01BQUdDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUVaO01BQVM7SUFDckcsQ0FBQyxDQUFDO0lBRUYsTUFBTTtNQUFFWSxTQUFTO01BQUVDLE9BQU87TUFBRUMsYUFBYTtNQUFFQyxVQUFVO01BQUNMLFVBQVUsRUFBQyxDQUFDO1FBQUNNLElBQUksRUFBQztVQUFDQztRQUFTO01BQUMsQ0FBQztJQUFDLENBQUMsR0FBR2QsTUFBTSxDQUFDZSxVQUFVO0lBQzFHLE1BQU1DLE9BQU8sR0FBRyxNQUFNQyxlQUFNLENBQUNELE9BQU8sQ0FBQ2xCLFFBQVEsRUFBRWEsYUFBYSxDQUFDO0lBRTdELElBQUlLLE9BQU8sRUFBRSxPQUFPakIsRUFBRSxDQUFDLElBQUksRUFBRTtNQUFFRixRQUFRLEVBQUVZLFNBQVM7TUFBRVMsTUFBTSxFQUFFUixPQUFPO01BQUVTLEtBQUssRUFBRVAsVUFBVTtNQUFFUSxTQUFTLEVBQUVOO0lBQVMsQ0FBQyxDQUFDO0VBSWxILENBQUMsQ0FBQyxPQUFPTyxLQUFLLEVBQUU7SUFDWixPQUFPdEIsRUFBRSxDQUFDLElBQUksRUFBRXNCLEtBQUssQ0FBQ0MsT0FBTyxDQUFDO0VBQ2xDO0VBRUF2QixFQUFFLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQztBQUNuQixDQUFDLENBQ0osQ0FBQztBQUVGLE1BQU13QixZQUFZLEdBQUd4QyxRQUFRLENBQUN3QyxZQUFZLENBQUMsT0FBTyxFQUFFO0VBQUVDLE9BQU8sRUFBRTtBQUFNLENBQUMsQ0FBQztBQUV2RUMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYkgsWUFBWTtFQUNaSSxLQUFLLEVBQUVBLEtBQUs7RUFDWkMsV0FBVyxFQUFFQSxXQUFXO0VBQ3hCQyxZQUFZLEVBQUVBLFlBQVk7RUFDMUJDLFlBQVksRUFBR0E7QUFDbkIsQ0FBQztBQUlELGVBQWVILEtBQUssQ0FBQ0ksR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUNqQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsVUFBVSxFQUFFSixHQUFHLENBQUNLLElBQUksQ0FBQztFQUNqQyxNQUFNQyxLQUFLLEdBQUcsTUFBTUMsSUFBSSxDQUFDO0lBQUV6QyxRQUFRLEVBQUVrQyxHQUFHLENBQUNLLElBQUksQ0FBQ3ZDLFFBQVE7SUFBRTBDLFFBQVEsRUFBRVIsR0FBRyxDQUFDSyxJQUFJLENBQUNoQjtFQUFVLENBQUMsQ0FBQztFQUN2RixNQUFNO0lBQUVGLE1BQU07SUFBRXJCLFFBQVE7SUFBRXNCLEtBQUs7SUFBRUM7RUFBVSxDQUFDLEdBQUdXLEdBQUcsQ0FBQ0ssSUFBSTtFQUN2REYsT0FBTyxDQUFDQyxHQUFHLENBQUNKLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0VBQ3JCSixHQUFHLENBQUNRLE1BQU0sQ0FBQyxLQUFLLEVBQUVILEtBQUssRUFBRTtJQUFFSSxRQUFRLEVBQUU7RUFBSyxDQUFDLENBQUM7RUFFNUNULEdBQUcsQ0FBQ1UsSUFBSSxDQUFDO0lBQUVDLE9BQU8sRUFBRTtNQUFFekIsTUFBTTtNQUFFckIsUUFBUTtNQUFFc0IsS0FBSztNQUFFQztJQUFVLENBQUM7SUFBRXdCLE9BQU8sRUFBRSxJQUFJO0lBQUVQLEtBQUssRUFBRUE7RUFBTSxDQUFDLENBQUM7QUFDOUY7QUFHQSxlQUFlQyxJQUFJLENBQUNPLE9BQU8sRUFBRTtFQUN6QixNQUFNUixLQUFLLEdBQUcsTUFBTXhELEdBQUcsQ0FBQ3lELElBQUksQ0FBQ08sT0FBTyxFQUFFNUQsU0FBUyxFQUFFTSxPQUFPLENBQUM7RUFDekQsT0FBTzhDLEtBQUs7QUFDaEI7QUFFQSxlQUFlUixZQUFZLENBQUNFLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7RUFDeEMsTUFBTWEsU0FBUyxHQUFHZixHQUFHLENBQUNnQixPQUFPLENBQUNDLGFBQWEsSUFBSWpCLEdBQUcsQ0FBQ2tCLE9BQU8sQ0FBQ3BFLEdBQUc7RUFDOUQsTUFBTWdFLE9BQU8sR0FBRyxNQUFNSyxNQUFNLENBQUNKLFNBQVMsQ0FBQztFQUN2QyxJQUFJRCxPQUFPLENBQUNoRCxRQUFRLEVBQUU7SUFDbEJrQyxHQUFHLENBQUNLLElBQUksR0FBR1MsT0FBTztJQUNsQixJQUFJZCxHQUFHLENBQUNLLElBQUksQ0FBQ0csUUFBUSxLQUFLLFFBQVEsRUFBRVIsR0FBRyxDQUFDb0IsUUFBUSxHQUFHLElBQUk7SUFDdkQsT0FBT2xCLElBQUksRUFBRTtFQUNqQjtFQUVBLE1BQU1tQixHQUFHLEdBQUcsSUFBSUMsS0FBSyxDQUFDLGNBQWMsQ0FBQztFQUNyQ0QsR0FBRyxDQUFDRSxVQUFVLEdBQUcsR0FBRztFQUNwQnJCLElBQUksQ0FBQ21CLEdBQUcsQ0FBQztBQUNiO0FBRUEsZUFBZXhCLFdBQVcsQ0FBQ0csR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUN2QyxNQUFNYSxTQUFTLEdBQUdmLEdBQUcsQ0FBQ2dCLE9BQU8sQ0FBQ0MsYUFBYSxJQUFJakIsR0FBRyxDQUFDa0IsT0FBTyxDQUFDcEUsR0FBRztFQUM5RCxNQUFNZ0UsT0FBTyxHQUFHLE1BQU1LLE1BQU0sQ0FBQ0osU0FBUyxDQUFDO0VBQ3ZDLElBQUlELE9BQU8sQ0FBQ2hELFFBQVEsS0FBSyxPQUFPLEVBQUUsT0FBT29DLElBQUksRUFBRTtFQUMvQyxNQUFNbUIsR0FBRyxHQUFHLElBQUlDLEtBQUssQ0FBQyxjQUFjLENBQUM7RUFDckNELEdBQUcsQ0FBQ0UsVUFBVSxHQUFHLEdBQUc7RUFDcEJyQixJQUFJLENBQUNtQixHQUFHLENBQUM7QUFDYjtBQUVBLGVBQWVGLE1BQU0sQ0FBQ0osU0FBUyxHQUFHLEVBQUUsRUFBRTtFQUNsQ0EsU0FBUyxHQUFHQSxTQUFTLENBQUNTLE9BQU8sQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDO0VBQzlDLElBQUk7SUFDQSxNQUFNVixPQUFPLEdBQUcsTUFBTWhFLEdBQUcsQ0FBQ3FFLE1BQU0sQ0FBQ0osU0FBUyxFQUFFN0QsU0FBUyxDQUFDO0lBQ3RELE9BQU80RCxPQUFPO0VBQ2xCLENBQUMsQ0FBQyxPQUFPTyxHQUFHLEVBQUU7SUFDVkEsR0FBRyxDQUFDRSxVQUFVLEdBQUcsR0FBRztJQUNwQixNQUFNRixHQUFHO0VBQ2I7QUFDSjtBQUVBLGVBQWV0QixZQUFZLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0VBQ2xDLE1BQU07SUFBRUYsWUFBWSxFQUFFMEI7RUFBYSxDQUFDLEdBQUd6QixHQUFHLENBQUMwQixJQUFJO0VBRS9DLElBQUlELFlBQVksSUFBSSxJQUFJLEVBQUU7SUFDdEIsT0FBT3hCLEdBQUcsQ0FBQzBCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2hCLElBQUksQ0FBQztNQUFFcEIsT0FBTyxFQUFFO0lBQTZCLENBQUMsQ0FBQztFQUMxRTtFQUVBLElBQUk7SUFDQSxNQUFNdEIsTUFBTSxHQUFHLE1BQU1DLG1CQUFNLENBQUMwRCxNQUFNLENBQUN4RCxPQUFPLENBQUM7TUFDdkNLLEtBQUssRUFBRTtRQUFFb0QsUUFBUSxFQUFFOUI7TUFBYTtJQUNwQyxDQUFDLENBQUM7SUFFRixJQUFJLENBQUNBLFlBQVksRUFBRTtNQUNmRSxHQUFHLENBQUMwQixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNoQixJQUFJLENBQUM7UUFBRXBCLE9BQU8sRUFBRTtNQUFvQyxDQUFDLENBQUM7TUFDdEU7SUFDSjtJQUVBLElBQUl0QixNQUFNLENBQUM2RCxpQkFBaUIsQ0FBQ0MsT0FBTyxFQUFFLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUNELE9BQU8sRUFBRSxFQUFFO01BQzNEOUIsR0FBRyxDQUFDMEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDaEIsSUFBSSxDQUFDO1FBQ2pCcEIsT0FBTyxFQUFFO01BQ2IsQ0FBQyxDQUFDO01BQ0Y7SUFDSjtJQUVBLElBQUkwQyxjQUFjLEdBQUduRixHQUFHLENBQUN5RCxJQUFJLENBQUM7TUFBRTJCLEVBQUUsRUFBRTdCLElBQUksQ0FBQzZCO0lBQUcsQ0FBQyxFQUFFQyxNQUFNLENBQUNDLE1BQU0sRUFBRTtNQUMxRDFFLFNBQVMsRUFBRXlFLE1BQU0sQ0FBQ0U7SUFDcEIsQ0FBQyxDQUFDO0lBRUosT0FBT3BDLEdBQUcsQ0FBQzBCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2hCLElBQUksQ0FBQztNQUN4QjJCLFdBQVcsRUFBRUwsY0FBYztNQUMzQmxDLFlBQVksRUFBRUEsWUFBWSxDQUFDTztJQUMvQixDQUFDLENBQUM7RUFFTixDQUFDLENBQUMsT0FBT2hCLEtBQUssRUFBRTtJQUNaLE9BQU9XLEdBQUcsQ0FBQzBCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ1ksSUFBSSxDQUFDO01BQUVoRCxPQUFPLEVBQUVEO0lBQU0sQ0FBQyxDQUFDO0VBQ25EO0FBR0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIn0=","map":{"version":3,"names":["jwt","require","passport","Strategy","jwtSecret","process","env","JWT_SECRET","adminPassword","ADMIN_PASSWORD","jwtOpts","algorithm","expiresIn","use","usernameField","passwordField","username","password","cb","result","models","users","findOne","include","model","roles","user_roles","where","user_name","user_id","user_password","user_email","role","role_name","dataValues","compare","bcrypt","userId","email","userRoles","error","message","authenticate","session","module","exports","login","ensureAdmin","ensureSeller","refreshToken","req","res","next","console","log","user","token","sign","roleType","cookie","httpOnly","json","profile","success","payload","jwtString","headers","authorization","cookies","verify","isSeller","err","Error","statusCode","replace","requestToken","body","status","tokens","token_id","token_expire_date","getTime","Date","newAccessToken","id","config","secret","jwtExpiration","accessToken","send"],"sourceRoot":"/Applications/nodejs/server/server/helpers/","sources":["authJWT.js"],"sourcesContent":["const jwt = require('jsonwebtoken')\nconst passport = require('passport')\nconst Strategy = require('passport-local').Strategy\n\nimport bcrypt from 'bcrypt';\n\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt'\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret'\nconst jwtOpts = { algorithm: 'HS256', expiresIn: '30d' }\nimport models from '../models/init-models'\n\n//passport.use(adminStrategy())\n\npassport.use(new Strategy({\n    usernameField: 'username',\n    passwordField: 'password'\n},\n    async function (username, password, cb) {\n        try {\n            const result = await models.users.findOne({\n              include:[{include:[{model:models.roles}], model:models.user_roles}],  where: { user_name: username }\n            });\n            \n            const { user_name, user_id, user_password, user_email,user_roles:[{role:{role_name}}]} = result.dataValues;\n            const compare = await bcrypt.compare(password, user_password);\n\n            if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, userRoles: role_name})\n\n\n\n        } catch (error) {\n            return cb(null, error.message)\n        }\n\n        cb(null, false)\n    }\n))\n\nconst authenticate = passport.authenticate('local', { session: false })\n\nmodule.exports = {\n    authenticate,\n    login: login,\n    ensureAdmin: ensureAdmin,\n    ensureSeller: ensureSeller,\n    refreshToken : refreshToken\n}\n\n\n\nasync function login(req, res, next) {\n    console.log(1234567890, req.user);\n    const token = await sign({ username: req.user.username, roleType: req.user.userRoles });\n    const { userId, username, email, userRoles } = req.user;\n    console.log(req.user);\n    res.cookie('jwt', token, { httpOnly: true })\n\n    res.json({ profile: { userId, username, email, userRoles }, success: true, token: token })\n}\n\n\nasync function sign(payload) {\n    const token = await jwt.sign(payload, jwtSecret, jwtOpts)\n    return token\n}\n\nasync function ensureSeller(req, res, next) {\n    const jwtString = req.headers.authorization || req.cookies.jwt\n    const payload = await verify(jwtString)\n    if (payload.username) {\n        req.user = payload;\n        if (req.user.roleType === 'Seller') req.isSeller = true;\n        return next();\n    }\n\n    const err = new Error('Unauthorized');\n    err.statusCode = 401;\n    next(err);\n}\n\nasync function ensureAdmin(req, res, next) {\n    const jwtString = req.headers.authorization || req.cookies.jwt\n    const payload = await verify(jwtString)\n    if (payload.username === 'admin') return next()\n    const err = new Error('Unauthorized')\n    err.statusCode = 401\n    next(err)\n}\n\nasync function verify(jwtString = '') {\n    jwtString = jwtString.replace(/^Bearer /i, '')\n    try {\n        const payload = await jwt.verify(jwtString, jwtSecret)\n        return payload\n    } catch (err) {\n        err.statusCode = 401\n        throw err\n    }\n}\n\nasync function refreshToken(req, res) {\n    const { refreshToken: requestToken } = req.body;\n\n    if (requestToken == null) {\n        return res.status(403).json({ message: \"Refresh Token is required!\" });\n    }\n\n    try {\n        const result = await models.tokens.findOne({\n            where: { token_id: refreshToken }\n        });\n\n        if (!refreshToken) {\n            res.status(403).json({ message: \"Refresh token is not in database!\" });\n            return;\n        }\n\n        if (result.token_expire_date.getTime() < new Date().getTime()) {\n            res.status(403).json({\n                message: \"Refresh token was expired. Please make a new signin request\",\n            });\n            return;\n        }\n\n        let newAccessToken = jwt.sign({ id: user.id }, config.secret, {\n            expiresIn: config.jwtExpiration,\n          });\n\n        return res.status(200).json({\n            accessToken: newAccessToken,\n            refreshToken: refreshToken.token,\n        });\n\n    } catch (error) {\n        return res.status(500).send({ message: error });\n    }\n\n\n}\n\n// function adminStrategy() {\n\n//     return new Strategy(async function (username, password, cb) {\n//         try {\n//             const result = await models.users.findOne({\n//                 where: { user_email: username }\n//             });\n\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\n//             const compare = await bcrypt.compare(password, user_password);\n\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\n//         } catch (error) {\n//             //console.log(error);\n//             return cb(null, error)\n//         }\n\n//         cb(null, false)\n//     })\n// }"],"mappings":";;AAIA;AAKA;AAA0C;AAT1C,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACnC,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AACpC,MAAME,QAAQ,GAAGF,OAAO,CAAC,gBAAgB,CAAC,CAACE,QAAQ;AAInD,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU,IAAI,OAAO;AACnD,MAAMC,aAAa,GAAGH,OAAO,CAACC,GAAG,CAACG,cAAc,IAAI,QAAQ;AAC5D,MAAMC,OAAO,GAAG;EAAEC,SAAS,EAAE,OAAO;EAAEC,SAAS,EAAE;AAAM,CAAC;AAGxD;;AAEAV,QAAQ,CAACW,GAAG,CAAC,IAAIV,QAAQ,CAAC;EACtBW,aAAa,EAAE,UAAU;EACzBC,aAAa,EAAE;AACnB,CAAC,EACG,gBAAgBC,QAAQ,EAAEC,QAAQ,EAAEC,EAAE,EAAE;EACpC,IAAI;IACA,MAAMC,MAAM,GAAG,MAAMC,mBAAM,CAACC,KAAK,CAACC,OAAO,CAAC;MACxCC,OAAO,EAAC,CAAC;QAACA,OAAO,EAAC,CAAC;UAACC,KAAK,EAACJ,mBAAM,CAACK;QAAK,CAAC,CAAC;QAAED,KAAK,EAACJ,mBAAM,CAACM;MAAU,CAAC,CAAC;MAAGC,KAAK,EAAE;QAAEC,SAAS,EAAEZ;MAAS;IACrG,CAAC,CAAC;IAEF,MAAM;MAAEY,SAAS;MAAEC,OAAO;MAAEC,aAAa;MAAEC,UAAU;MAACL,UAAU,EAAC,CAAC;QAACM,IAAI,EAAC;UAACC;QAAS;MAAC,CAAC;IAAC,CAAC,GAAGd,MAAM,CAACe,UAAU;IAC1G,MAAMC,OAAO,GAAG,MAAMC,eAAM,CAACD,OAAO,CAAClB,QAAQ,EAAEa,aAAa,CAAC;IAE7D,IAAIK,OAAO,EAAE,OAAOjB,EAAE,CAAC,IAAI,EAAE;MAAEF,QAAQ,EAAEY,SAAS;MAAES,MAAM,EAAER,OAAO;MAAES,KAAK,EAAEP,UAAU;MAAEQ,SAAS,EAAEN;IAAS,CAAC,CAAC;EAIlH,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZ,OAAOtB,EAAE,CAAC,IAAI,EAAEsB,KAAK,CAACC,OAAO,CAAC;EAClC;EAEAvB,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC;AACnB,CAAC,CACJ,CAAC;AAEF,MAAMwB,YAAY,GAAGxC,QAAQ,CAACwC,YAAY,CAAC,OAAO,EAAE;EAAEC,OAAO,EAAE;AAAM,CAAC,CAAC;AAEvEC,MAAM,CAACC,OAAO,GAAG;EACbH,YAAY;EACZI,KAAK,EAAEA,KAAK;EACZC,WAAW,EAAEA,WAAW;EACxBC,YAAY,EAAEA,YAAY;EAC1BC,YAAY,EAAGA;AACnB,CAAC;AAID,eAAeH,KAAK,CAACI,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACjCC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEJ,GAAG,CAACK,IAAI,CAAC;EACjC,MAAMC,KAAK,GAAG,MAAMC,IAAI,CAAC;IAAEzC,QAAQ,EAAEkC,GAAG,CAACK,IAAI,CAACvC,QAAQ;IAAE0C,QAAQ,EAAER,GAAG,CAACK,IAAI,CAAChB;EAAU,CAAC,CAAC;EACvF,MAAM;IAAEF,MAAM;IAAErB,QAAQ;IAAEsB,KAAK;IAAEC;EAAU,CAAC,GAAGW,GAAG,CAACK,IAAI;EACvDF,OAAO,CAACC,GAAG,CAACJ,GAAG,CAACK,IAAI,CAAC;EACrBJ,GAAG,CAACQ,MAAM,CAAC,KAAK,EAAEH,KAAK,EAAE;IAAEI,QAAQ,EAAE;EAAK,CAAC,CAAC;EAE5CT,GAAG,CAACU,IAAI,CAAC;IAAEC,OAAO,EAAE;MAAEzB,MAAM;MAAErB,QAAQ;MAAEsB,KAAK;MAAEC;IAAU,CAAC;IAAEwB,OAAO,EAAE,IAAI;IAAEP,KAAK,EAAEA;EAAM,CAAC,CAAC;AAC9F;AAGA,eAAeC,IAAI,CAACO,OAAO,EAAE;EACzB,MAAMR,KAAK,GAAG,MAAMxD,GAAG,CAACyD,IAAI,CAACO,OAAO,EAAE5D,SAAS,EAAEM,OAAO,CAAC;EACzD,OAAO8C,KAAK;AAChB;AAEA,eAAeR,YAAY,CAACE,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACxC,MAAMa,SAAS,GAAGf,GAAG,CAACgB,OAAO,CAACC,aAAa,IAAIjB,GAAG,CAACkB,OAAO,CAACpE,GAAG;EAC9D,MAAMgE,OAAO,GAAG,MAAMK,MAAM,CAACJ,SAAS,CAAC;EACvC,IAAID,OAAO,CAAChD,QAAQ,EAAE;IAClBkC,GAAG,CAACK,IAAI,GAAGS,OAAO;IAClB,IAAId,GAAG,CAACK,IAAI,CAACG,QAAQ,KAAK,QAAQ,EAAER,GAAG,CAACoB,QAAQ,GAAG,IAAI;IACvD,OAAOlB,IAAI,EAAE;EACjB;EAEA,MAAMmB,GAAG,GAAG,IAAIC,KAAK,CAAC,cAAc,CAAC;EACrCD,GAAG,CAACE,UAAU,GAAG,GAAG;EACpBrB,IAAI,CAACmB,GAAG,CAAC;AACb;AAEA,eAAexB,WAAW,CAACG,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACvC,MAAMa,SAAS,GAAGf,GAAG,CAACgB,OAAO,CAACC,aAAa,IAAIjB,GAAG,CAACkB,OAAO,CAACpE,GAAG;EAC9D,MAAMgE,OAAO,GAAG,MAAMK,MAAM,CAACJ,SAAS,CAAC;EACvC,IAAID,OAAO,CAAChD,QAAQ,KAAK,OAAO,EAAE,OAAOoC,IAAI,EAAE;EAC/C,MAAMmB,GAAG,GAAG,IAAIC,KAAK,CAAC,cAAc,CAAC;EACrCD,GAAG,CAACE,UAAU,GAAG,GAAG;EACpBrB,IAAI,CAACmB,GAAG,CAAC;AACb;AAEA,eAAeF,MAAM,CAACJ,SAAS,GAAG,EAAE,EAAE;EAClCA,SAAS,GAAGA,SAAS,CAACS,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;EAC9C,IAAI;IACA,MAAMV,OAAO,GAAG,MAAMhE,GAAG,CAACqE,MAAM,CAACJ,SAAS,EAAE7D,SAAS,CAAC;IACtD,OAAO4D,OAAO;EAClB,CAAC,CAAC,OAAOO,GAAG,EAAE;IACVA,GAAG,CAACE,UAAU,GAAG,GAAG;IACpB,MAAMF,GAAG;EACb;AACJ;AAEA,eAAetB,YAAY,CAACC,GAAG,EAAEC,GAAG,EAAE;EAClC,MAAM;IAAEF,YAAY,EAAE0B;EAAa,CAAC,GAAGzB,GAAG,CAAC0B,IAAI;EAE/C,IAAID,YAAY,IAAI,IAAI,EAAE;IACtB,OAAOxB,GAAG,CAAC0B,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;MAAEpB,OAAO,EAAE;IAA6B,CAAC,CAAC;EAC1E;EAEA,IAAI;IACA,MAAMtB,MAAM,GAAG,MAAMC,mBAAM,CAAC0D,MAAM,CAACxD,OAAO,CAAC;MACvCK,KAAK,EAAE;QAAEoD,QAAQ,EAAE9B;MAAa;IACpC,CAAC,CAAC;IAEF,IAAI,CAACA,YAAY,EAAE;MACfE,GAAG,CAAC0B,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;QAAEpB,OAAO,EAAE;MAAoC,CAAC,CAAC;MACtE;IACJ;IAEA,IAAItB,MAAM,CAAC6D,iBAAiB,CAACC,OAAO,EAAE,GAAG,IAAIC,IAAI,EAAE,CAACD,OAAO,EAAE,EAAE;MAC3D9B,GAAG,CAAC0B,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;QACjBpB,OAAO,EAAE;MACb,CAAC,CAAC;MACF;IACJ;IAEA,IAAI0C,cAAc,GAAGnF,GAAG,CAACyD,IAAI,CAAC;MAAE2B,EAAE,EAAE7B,IAAI,CAAC6B;IAAG,CAAC,EAAEC,MAAM,CAACC,MAAM,EAAE;MAC1D1E,SAAS,EAAEyE,MAAM,CAACE;IACpB,CAAC,CAAC;IAEJ,OAAOpC,GAAG,CAAC0B,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;MACxB2B,WAAW,EAAEL,cAAc;MAC3BlC,YAAY,EAAEA,YAAY,CAACO;IAC/B,CAAC,CAAC;EAEN,CAAC,CAAC,OAAOhB,KAAK,EAAE;IACZ,OAAOW,GAAG,CAAC0B,MAAM,CAAC,GAAG,CAAC,CAACY,IAAI,CAAC;MAAEhD,OAAO,EAAED;IAAM,CAAC,CAAC;EACnD;AAGJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA"}},"mtime":1676371133267}}